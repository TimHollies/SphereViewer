{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c37803a6a450bb932c7","webpack:///external \"THREE\"","webpack:///./src/ballSpinnerLoader.js","webpack:///./src/progressiveImgLoader.js","webpack:///./src/sphereControls.js","webpack:///external \"$\"","webpack:///./src/sphereViewer.js"],"names":["BallSpinnerLoader","config","groupRadius","circleCount","circleRadius","groupAngle","animationAmplitude","circles","mesh","initGroup","prototype","makeCircle","radius","circleSegments","segments","circleGeometry","circleMaterial","color","transparent","opacity","side","opacityStep","addToScene","scene","add","currOpacity","animationStep","currAngle","angleStep","Math","PI","i","oneCircle","pos","polar2cartesian","distance","radians","position","set","x","y","push","polar","round","cos","sin","animate","rotation","z","zStep","length","newOpacity","material","newRadius","geometry","ProgressiveImgLoader","proto","Object","create","load","images","self","texture","imageObj","Image","loadingIx","crossOrigin","onload","needsUpdate","dispatchEvent","type","imageIndex","window","setTimeout","src","image","dispose","SphereControls","camera","domElement","undefined","document","addEventListener","onDocumentMouseDown","onDocumentMouseMove","onDocumentMouseUp","onDocumentMouseWheel","onDocumentTouchStart","onDocumentTouchEnd","onDocumentTouchMove","initialTime","lubrication","_isUserInteracting","_dragStartPosition","lat","lon","_curr","phi","theta","time","_prev","time2","_target","_speed","_autoRotation","enabled","autoRotate","suspended","speed","max","min","autoRotateSpeed","autoRotateDirection","delay","autoRotateDelay","timeout","event","original","preventDefault","autoRotate_Stop","radToDeg","clientX","clientY","autoRotate_Start","fov","deltaY","updateProjectionMatrix","touches","stopPropagation","pageX","pageY","clearTimeout","update","degToRad","lookAt","SphereViewer","isDisposed","initViewport","initScene","sphere","forceCube","initSphere","initCube","logo","initLogo","logoDistance","hint","showHint","initControls","onResize","bind","render","nativeW","devicePixelRatio","screen","availWidth","scale","viewportMeta","originalViewPortMeta","attr","isMobile","container","createElement","className","closeButtonHtml","closeButton","innerHTML","appendChild","closeButton_onClick","getElementsByTagName","controls_onTap","ev","hideHint","body","renderer","setSize","scrollWidth","scrollHeight","fieldOfView","aspectRatio","near","far","imgUrl","cubeSize","materials","loadEqui","tiles","loadTiles","atlas","loadAtlas","showLoader","loadCounter","image_placeholder","map","key","img","console","log","hideLoader","canvases","el","canvas","tile2canvasIx","right","left","top","bottom","front","back","tileOrder","tileWidth","height","forEach","ix","width","context","getContext","drawImage","imgObj","srcWidth","srcHeight","inCanvas","inCtx","srcImg","getImageData","equi2recti","faceSize","imgOut","ImageData","tileIx2canvasIx","onWorkerMessage","faceIx","data","canvasIx","oneCanvas","putImageData","imgData","multiWorker","w","Worker","onmessage","postMessage","speherRadius","sphere_H_segments","sphere_V_segments","imgLoader","loader_onDone","uvMapper","logoUrl","texLoader","hintUrl","remove","controls","control","offsetWidth","offsetHeight","aspect","requestAnimationFrame","spinLoader","spinner","removeEventListener","loaderEl","Viewer"],"mappings":"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","file":"sphereViewer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"THREE\"), require(\"$\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"THREE\", \"$\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SphereViewer\"] = factory(require(\"THREE\"), require(\"$\"));\n\telse\n\t\troot[\"SphereViewer\"] = factory(root[\"THREE\"], root[\"$\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c37803a6a450bb932c7","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 0\n// module chunks = 0","/**\n * BallSpinnerLoader.js <https://github.com/knee-cola/BallSpinnerLoader.js>\n * Released under the MIT license\n * @author Nikola Derežić / https://github.com/knee-cola\n *\n * This is a spinner/loader built for Three.js platform.\n * \n * It can be used to notify user that some resources are being loaded.\n * I made it to replace pure CSS spinner, which was displayed in the\n * overlay above the 3D animation, since it was slowing down WebGL\n *\n * How to use:\n * \n *    // defining spinner config\n *    var spinnerConfig = {\n *      groupRadius: 20, // outter radius of the spinner circle\n *      circleCount: 8, // number of spinner elements (circles)\n *      circleRadius: 5, // radius of each of the spinner elements (circles)\n *      // as they spin, circles are brought closer to the camera af their\n *      // opacity increases. Here we can define how close/far are\n *      // the elements pushed\n *      animationAmplitude: 10\n *    };\n *    \n *\n *    // creating a new spinner\n *    var spinLoader = new BallSpinLoader(spinnerConfig);\n *    \n *    // add spinner to the scene\n *    spinLoader.addToScene(scene);\n *\n *   // add it to the render funcion\n *   function render() {\n *\n *      requestAnimationFrame( render );\n *\n *     // make it spin\n *     spinLoader.animate();\n *\n *     renderer.render( scene, camera );\n *   }\n * \n */\nimport {\n    EventDispatcher as THREE_EventDispatcher,\n    CircleGeometry as THREE_CircleGeometry,\n    MeshBasicMaterial as THREE_MeshBasicMaterial,\n    DoubleSide as THREE_DoubleSide,\n    Object3D as THREE_Object3D,\n    Mesh as THREE_Mesh\n  } from 'three'\n\nvar BallSpinnerLoader = function(config) {\n  config = config  || {};\n\n  this.groupRadius = config.groupRadius || 10;\n  this.circleCount = config.circleCount || 8;\n  this.circleRadius = config.circleRadius || 1;\n  this.groupAngle = 0;\n\n  // circles depending on their opacity will\n  // have higer or lower opacity\n  // [amplitude] defines the amplitude\n  this.animationAmplitude = config.animationAmplitude || 10;\n  \n  this.circles = [];\n  this.mesh = this.initGroup();\n};\n\nBallSpinnerLoader.prototype = {\n  makeCircle: function(config) {\n    config = config || {};\n    var circleRadius = config.radius || 5,\n        circleSegments = config.segments || 16, //<-- Increase or decrease for more resolution I guess\n        circleGeometry = new THREE_CircleGeometry( circleRadius, circleSegments ),\n        circleMaterial = new THREE_MeshBasicMaterial({ color: 0xffffff, transparent:true, opacity: config.opacity, side: THREE_DoubleSide });\n\n    return({\n      mesh: new THREE_Mesh(circleGeometry, circleMaterial),\n      opacityStep: config.opacityStep || 0.01\n    });\n  },\n  addToScene:function(scene) {\n    scene.add(this.mesh);\n  },\n  initGroup: function() {\n    var mesh = new THREE_Object3D(),\n        // the opacity will be distributed symetrically\n        // with maximum on one side of the circle group\n        // and minimum at the opposite side\n        currOpacity = 0,\n        opacityStep = 1 / (this.circleCount/2+1),\n        // opacity will be animated - here we define how fast\n        animationStep = 0.02,\n        // circles are distributed evenly around the group edge\n        currAngle = 0,\n        angleStep = 2*Math.PI / this.circleCount;\n\n    for(var i=0;i<this.circleCount;i++) {\n      \n      currOpacity+=opacityStep;\n      \n      if(currOpacity>1) {\n      // IF the max opacity has been reached\n      // > go into oposit direction\n        currOpacity = 1-opacityStep;\n        opacityStep = -opacityStep;\n        // reverse the opacity animation direction,\n        // so that the second halve of the circles\n        // is on the fade-out direction\n        // ... the net result that the opacity minimum/maximum\n        // will rotate around the group\n        animationStep = -animationStep;\n      }\n      \n      var oneCircle = this.makeCircle({opacity:currOpacity, opacityStep: animationStep, radius: this.circleRadius});\n      \n      // oneCircle.rotation.x = Math.PI / 4; // rotiram krug tako da bude položen na ravninu\n      var pos = this.polar2cartesian({ distance: this.groupRadius, radians: currAngle});\n      oneCircle.mesh.position.set(pos.x, pos.y, currOpacity*this.animationAmplitude);\n      \n      currAngle+=angleStep;\n      \n      mesh.add(oneCircle.mesh);\n      this.circles.push(oneCircle);\n    }\n\n    return(mesh);\n  },\n  polar2cartesian: function(polar) {\n    return({\n      x: Math.round(polar.distance * Math.cos(polar.radians)*1000)/1000,\n      y: Math.round(polar.distance * Math.sin(polar.radians)*1000)/1000\n    });\n  },\n  animate: function() {\n    this.mesh.rotation.z+=0.02;\n    var circles = this.circles;\n    var zStep = 50 / (this.circleCount/2+1);\n\n    for(var i=0; i<circles.length; i++) {\n      var oneCircle = circles[i],\n          newOpacity = oneCircle.mesh.material.opacity + oneCircle.opacityStep,\n          newRadius = oneCircle.mesh.geometry.radius;\n\n      if(newOpacity>1) {\n        newOpacity = 1-oneCircle.opacityStep;\n        oneCircle.opacityStep=-oneCircle.opacityStep;\n      } else if(newOpacity<0) {\n        newOpacity = oneCircle.opacityStep;\n        oneCircle.opacityStep=-oneCircle.opacityStep;\n      }\n      \n      oneCircle.mesh.material.opacity = newOpacity;\n      oneCircle.mesh.position.z = newOpacity*this.animationAmplitude;\n    }\n  }\n};\n\nexport { BallSpinnerLoader }\n\n\n// WEBPACK FOOTER //\n// ./src/ballSpinnerLoader.js","/**\n * ProgressiveImgLoader.js <https://github.com/knee-cola/ProgressiveImgLoader.js>\n * Released under the MIT license\n * @author Nikola Derežić / https://github.com/knee-cola\n * \n * This is a simple progressive image loader for Three.js\n * \n * It enables the smaller image (short loading time) files to be pre-loaded first,\n * before the big texture image is fully loaded.\n * \n * The images are loaded in the order they are passed to the loader\n * \n * The loader dispatches the following events:\n *  - progress = dispatched evey time an additional image was loaded\n *  - done = dispatched after the last image was loaded\n *  \n * Here's a simple example:\n * \n *  // Defining an array of different sizes of images\n *  //\n *  // Hint: apart from degrading image resolution, smaller image files\n *  //       can also be produced by increasing the JPG compression\n *  var imageUrls = ['480p.jpg', '720p.jpg', '1080p.jpg', '2048p.jpg']:\n *  \n *  // creating a new loader\n *  var loader = new ProgressiveImageLoader(imageUrls);\n *  \n *  // registering event handlers\n *  loader.addEventListener('progress', function() { console.log('progress');  });\n *  loader.addEventListener('done', function() { console.log('done');  });\n *  \n *  // creating material - calling the [load] function\n *  var material = new THREE.MeshBasicMaterial({ map: loader.load() })\n *\n *  var mesh = new THREE.Mesh(geometry, material);\n *  \n *  scene.add(mesh);\n * \n */\n\nimport {\n    EventDispatcher as THREE_EventDispatcher,\n    Texture as THREE_Texture\n  } from 'three'\n\nvar ProgressiveImgLoader = function() { };\n\nvar proto = ProgressiveImgLoader.prototype = Object.create( THREE_EventDispatcher.prototype );\n\nproto.load = function(images) {\n\n  var self = this;\n\n  var texture = new THREE_Texture();\n\n  // create an image object\n  var imageObj = self.imageObj = new Image(),\n      loadingIx = 0;\n\n  // this needs to be sit in order not to get \"Tainted canvases may not be loaded.\" WebGL error\n  imageObj.crossOrigin = \"anonymous\";\n\n  imageObj.onload = function() {\n\n    // [imageObj] is set to NULL when the object is disposed\n    if(self.imageObj) {\n\n      texture.needsUpdate = true;\n\n      if(loadingIx < images.length) {\n        self.dispatchEvent({type: 'progress', imageIndex: loadingIx});\n\n        // don't change the image [src] until the texture had a chance to update itself\n        window.setTimeout(function() {\n          imageObj.src = images[loadingIx++];\n        }, 1000);\n\n      } else {\n        self.dispatchEvent({type: 'done'});\n        self.imageObj = null;\n      }\n        \n    }\n\n  }; // imageObj.onload = function() {...}\n\n  // the loading process will begin after we set the [src] property\n  imageObj.src = images[loadingIx++];\n  texture.image = imageObj;\n\n  return(texture);\n\n}; // proto.load = function(images) {...}\n\nproto.dispose = function() {\n  // stop loading current image\n  if(this.imageObj) {\n    this.imageObj.src = '';\n  }\n  this.imageObj = null;\n};\n\nexport {ProgressiveImgLoader}\n\n\n// WEBPACK FOOTER //\n// ./src/progressiveImgLoader.js","/**\n * SphereControls.js <https://github.com/knee-cola/SphereControls.js>\n * Released under the MIT license\n * @author Nikola Derežić / https://github.com/knee-cola\n * \n * This class controls the camera positioned in the middle of a sphere. It\n * allows the user to look around. It supports desktop (click events) and mobile\n * browser (touch events).\n * \n * How to use:\n * \n *  // defining te config for the controls\n * \tvar controlConfig = {\n * \t\tautoRotate: true, // the camera should rotate automatially\n * \t\tautoRotateSpeed: 2, // the speed of automatic rotation\n * \t\tautoRotateDirection: -1, // the direction (1=left / -1=right)\n * \t\tautoRotateDelay: 5000 // for how long should automatic rotation be paused after a user interaction\n * \t};\n * \n * \tvar _ctrl = new SphereControls(_camera, _renderer.domElement, controlConfig);\n * \t\n * \t// attaching the event handler\n * \t_ctrl.addEventListener('tap', function() { console.log('user tapped the screen'); });\n * \n *   function render() {\n *\n *      requestAnimationFrame( render );\n *\n *     // updating controls from the [render] function\n *     _ctrl.update();\n *\n *     _renderer.render( _scene, _camera );\n *   }\n *   \n */\nimport {\n    EventDispatcher as THREE_EventDispatcher,\n    Vector3 as THREE_Vector3,\n    Math as THREE_Math\n  } from 'three'\n\nvar SphereControls = function (camera, domElement, config) {\n\n\tvar self = this;\n\n\tconfig = config || {};\n\n\tdomElement = ( domElement !== undefined ) ? domElement : document;\n\tdomElement.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\tdomElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\tdomElement.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdomElement.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\tdomElement.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\tdomElement.addEventListener( 'touchend', onDocumentTouchEnd, false );\n\tdomElement.addEventListener( 'touchmove', onDocumentTouchMove, false );\n\n\t//  [initialTime] determins the how much the speed is initially decreased,\n\t//  after the user releases the mouse button - the higher the value,\n\t//  the larger initial drop in speed - don't go below 2\n\tvar initialTime = 5,\n\t\t// [lubrication] determins how fast the speed decreases after the user\n\t\t// releases the mouse button. Larger value, the slower the speed drops\n\t\tlubrication = 60;\n\n\tvar _isUserInteracting = false,\n\t\t_dragStartPosition ={\n\t\t\tx: null,\n\t\t\ty: null,\n\t\t\tlat: null,\n\t\t\tlon: null\n\t\t},\n\t\t_curr = {\n\t\t\tposition: {\n\t\t\t\tlon: 90,\n\t\t\t\tlat: 0,\n\t\t\t\tphi: Math.PI/2,\n\t\t\t\ttheta: 0\n\t\t\t},\n\t\t\ttime: initialTime\n\t\t},\n\t\t_prev = {\n\t\t\tposition: {\n\t\t\t\tphi: _curr.position.phi,\n\t\t\t\ttheta: _curr.position.theta\n\t\t\t},\n\t\t\ttime2: 1\n\t\t},\n\t\t_target = new THREE_Vector3(),\n\t\t_speed = {\n\t\t\tphi: 0,\n\t\t\ttheta: 0\n\t\t},\n\t\t_autoRotation = {\n\t\t\tenabled: !!config.autoRotate,\n\t\t\tsuspended: !config.autoRotate,\n\t\t\tspeed: Math.max(0, Math.min(10, config.autoRotateSpeed || 1)) / 1000 * (config.autoRotateDirection===-1 ? -1 : 1),\n\t\t\tdelay: Math.max(config.autoRotateDelay || 5000, 1000), // after how much time shoud the automatic rotation start\n\t\t\ttimeout: null\n\n\t\t}\n\n\tfunction onDocumentMouseDown( event ) {\n\t\t\n\t\t// attache the original event as payload\n\t\tself.dispatchEvent({type:'tap', original:event });\n\n\t\tevent.preventDefault();\n\n\t\t_isUserInteracting = true;\n\t\tautoRotate_Stop();\n\n\t\t_curr.position.lon = THREE_Math.radToDeg( _curr.position.theta );\n\t\t_curr.position.lat = 90 - THREE_Math.radToDeg( _curr.position.phi );\n\n\t\t_dragStartPosition.x = event.clientX;\n\t\t_dragStartPosition.y = event.clientY;\n\t\t_dragStartPosition.lon = _curr.position.lon;\n\t\t_dragStartPosition.lat = _curr.position.lat;\n\t}\n\tfunction onDocumentMouseMove( event ) {\n\t\tif ( _isUserInteracting === true ) {\n\t\t\t_curr.position.lon = ( _dragStartPosition.x - event.clientX ) * 0.1 + _dragStartPosition.lon;\n\t\t\t_curr.position.lat = ( event.clientY - _dragStartPosition.y ) * 0.1 + _dragStartPosition.lat;\n\t\t}\n\t\tself.dispatchEvent({type:'mouseMove', original:event });\n\t}\n\tfunction onDocumentMouseUp( event ) {\n\t\t_isUserInteracting = false;\n\t\tevent.preventDefault()\n\t\tautoRotate_Start();\n\t}\n\tfunction onDocumentMouseWheel( event ) {\n\t\tcamera.fov += event.deltaY * 0.05;\n\t\tcamera.updateProjectionMatrix();\n\t}\n\tfunction onDocumentTouchStart( event ) {\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t_isUserInteracting = true;\n\t\t\tautoRotate_Stop();\n\n\t\t\t// attache the original event as payload\n\t\t\tself.dispatchEvent({type:'tap', original:event });\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\t_dragStartPosition.x = event.touches[ 0 ].pageX;\n\t\t\t_dragStartPosition.y = event.touches[ 0 ].pageY;\n\n\t\t\t_curr.position.lon = THREE_Math.radToDeg( _curr.position.theta );\n\t\t\t_curr.position.lat = 90 - THREE_Math.radToDeg( _curr.position.phi );\n\n\t\t\t_dragStartPosition.lon = _curr.position.lon;\n\t\t\t_dragStartPosition.lat = _curr.position.lat;\n\t\t}\n\t}\n\tfunction onDocumentTouchMove( event ) {\n\t\tif ( event.touches.length == 1 ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\t_curr.position.lon = ( _dragStartPosition.x - event.touches[0].pageX ) * 0.1 + _dragStartPosition.lon;\n\t\t\t_curr.position.lat = ( event.touches[0].pageY - _dragStartPosition.y ) * 0.1 + _dragStartPosition.lat;\n\t\t}\n\t}\n\tfunction onDocumentTouchEnd( event ) {\n\t\t_isUserInteracting = false;\n\t\tautoRotate_Start();\n\t}\n\n\tfunction autoRotate_Stop() {\n\t\t_autoRotation.suspended = true;\n\n\t\tif(_autoRotation.timeout) {\n\t\t\twindow.clearTimeout(_autoRotation.timeout);\n\t\t}\n\t}\n\n\tfunction autoRotate_Start() {\n\t\tif(_autoRotation.enabled) {\n\t\t\t_autoRotation.timeout = window.setTimeout(function() {\n\t\t\t\t_autoRotation.timeout = null;\n\t\t\t\t_autoRotation.suspended = false;\n\t\t\t}, _autoRotation.delay);\n\t\t}\n\t}\n\n\tthis.update = function() {\n\n\t\tif(_isUserInteracting) {\n\n\t\t\t_curr.position.lat = Math.max( - 85, Math.min( 85, _curr.position.lat ) );\n\n\t\t\t_curr.position.phi = THREE_Math.degToRad( 90 - _curr.position.lat );\n\t\t\t_curr.position.theta = THREE_Math.degToRad( _curr.position.lon );\n\n\t\t\t// calculate the drag speed\n\t\t\t_speed = {\n\t\t\t\tphi: _curr.position.phi - _prev.position.phi,\n\t\t\t\ttheta: _curr.position.theta - _prev.position.theta\n\t\t\t};\n\n\t\t\t_curr.time = initialTime; // reset the time to initial time\n\n\t\t\t_prev.time2 = 1;\n\n\t\t} else {\n\n\n\t\t\tvar time2 = _curr.time*_curr.time/lubrication;\n\t\t\t_curr.time++;\n\n\t\t\t// calculating the new value of speed\n\t\t\t_speed.phi = _speed.phi*_prev.time2 / time2;\n\t\t\t_speed.theta = _speed.theta*_prev.time2 / time2;\n\n\t\t\t_prev.time2 = time2;\n\n\t\t\tif(!_autoRotation.suspended) {\n\t\t\t\t_speed.theta = _autoRotation.speed < 0 ? Math.min(_speed.theta, _autoRotation.speed) : Math.max(_speed.theta, _autoRotation.speed);\n\t\t\t}\n\n\t\t\t// adjusting the camera angle\n\t\t\t_curr.position.phi += _speed.phi;\n\t\t\t_curr.position.theta += _speed.theta;\n\n\t\t\tif(_curr.position.phi>Math.PI) {\n\t\t\t// IF the camera hits the sphere bottom\n\t\t\t// > make it bouce back\n\t\t\t\t_curr.position.phi=Math.PI;\n\t\t\t\t_speed.phi = _speed.phi*-1;\n\t\t\t} else if(_curr.position.phi<0) {\n\t\t\t// IF the camera hits the sphere top\n\t\t\t// > make it bouce back\n\t\t\t\t_curr.position.phi=0;\n\t\t\t\t_speed.phi = _speed.phi*-1;\n\t\t\t}\n\t\t}\n\n\t\t_prev.position.phi = _curr.position.phi;\n\t\t_prev.position.theta = _curr.position.theta;\n\n\t\t_target.x = 500 * Math.sin( _curr.position.phi ) * Math.cos( _curr.position.theta );\n\t\t_target.y = 500 * Math.cos( _curr.position.phi );\n\t\t_target.z = 500 * Math.sin( _curr.position.phi ) * Math.sin( _curr.position.theta );\n\n\t\tcamera.lookAt( _target );\n\t}\n\n}; // SphereControls = function (camera) {...}\n\nSphereControls.prototype = Object.create( THREE_EventDispatcher.prototype );\n\nexport {SphereControls}\n\n\n// WEBPACK FOOTER //\n// ./src/sphereControls.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 4\n// module chunks = 0","/**\n * SphereViewer.js <https://github.com/knee-cola/SphereViewer.js>\n * Released under the MIT license\n * @author Nikola Derežić / https://github.com/knee-cola\n */\nimport {\n    EventDispatcher as THREE_EventDispatcher,\n    WebGLRenderer as THREE_WebGLRenderer,\n    Scene as THREE_Scene,\n    PerspectiveCamera as THREE_PerspectiveCamera,\n    SphereGeometry as THREE_SphereGeometry,\n    Mesh as THREE_Mesh,\n    MeshBasicMaterial as THREE_MeshBasicMaterial,\n    TextureLoader as THREE_TextureLoader,\n    Texture as THREE_Texture,\n    PlaneGeometry as THREE_PlaneGeometry,\n    BoxGeometry as THREE_BoxGeometry,\n    DoubleSide as THREE_DoubleSide,\n    FrontSide as THREE_FrontSide,\n    BackSide as THREE_BackSide,\n    Matrix4 as THREE_Matrix4\n  } from 'three'\n\nimport $ from 'jquery'\n\nimport {SphereControls} from './sphereControls'\nimport {ProgressiveImgLoader} from './progressiveImgLoader'\nimport {BallSpinnerLoader} from './ballSpinnerLoader'\n\nfunction SphereViewer(config) {\n\n\tthis.isDisposed = false;\n\tthis.config = config = config || {};\n\n\tthis.initViewport();\n\tthis.initScene();\n\t\n\tif(this.config.sphere && !this.config.forceCube) {\n\t// IF image URLs are provided via a \"sphere\" param\n\t// AND cube geometry is not forced\n\t// > apply texture onto a sphere\n\t\tthis.initSphere();\n\t} else {\n\t// ELSE apply texture onto a cube/box \n\t\tthis.initCube();\n\t}\n\t\n\tif(this.config.logo) {\n\t\tthis.initLogo(this.config.logo, this.config.logoDistance===void 0 ? -15 : this.config.logoDistance);\n\t}\n\n\tif(this.config.hint) {\n\t\tthis.showHint(this.config.hint);\n\t}\n\n\tthis.initControls();\n\n\t// attaching a bound version of the method to the instance\n\t// > we'll need it to remove event listener\n\tthis.onResize = this.onResize.bind(this);\n\n\twindow.addEventListener('resize', this.onResize, false);\n\twindow.setTimeout(this.onResize, 1);\n\n\tthis.render();\n};\n\nvar proto = SphereViewer.prototype = Object.create( THREE_EventDispatcher.prototype );\n\nproto.initViewport = function() {\n\n    var nativeW = window.devicePixelRatio * window.screen.availWidth,\n        scale = 1/window.devicePixelRatio,\n        viewportMeta = $('head meta[name=\"viewport\"]');\n\n    this.originalViewPortMeta = viewportMeta.attr('content');\n    viewportMeta.attr('content', 'initial-scale='+scale+', maximum-scale='+scale+', user-scalable=0');\n\n    // na mobitelima pixel ration NIJE 1\n    var isMobile = window.devicePixelRatio!==1;\n\n    this.container = document.createElement('div');\n    this.container.className = 'sphere-container ' + (isMobile ? 'isMobile' : 'isDesktop');\n\n    if(this.config.closeButtonHtml) {\n      this.closeButton = document.createElement('i');\n      this.closeButton.innerHTML = this.config.closeButtonHtml;\n      this.container.appendChild(this.closeButton);\n      // attaching a bound version of the method to the instance\n      // > we'll need it to remove event listener\n      this.closeButton_onClick = this.closeButton_onClick.bind(this);\n      this.closeButton.addEventListener('click', this.closeButton_onClick);\n    }\n\n    document.getElementsByTagName('body')[0].appendChild(this.container);\n\n  }; // proto.initViewport = function() {...}\n\nproto.closeButton_onClick = function() {\n  this.dispose();\n  this.dispatchEvent({type:'closed'});\n};\nproto.controls_onTap = function(ev) {\n  // on first tap - hide the hint\n  this.hideHint();\n};\n\nproto.initScene = function() {\n\n  var body = document.getElementsByTagName('body')[0];\n\n  this.renderer = new THREE_WebGLRenderer();\n\n  this.renderer.setSize(body.scrollWidth, body.scrollHeight);\n  this.container.appendChild(this.renderer.domElement);\n\n  this.scene = new THREE_Scene();\n\n  var fieldOfView = 90,\n      aspectRatio = 1,\n      near = 1,\n\n      far = 1000;\n\n  this.camera = new THREE_PerspectiveCamera(fieldOfView, aspectRatio, near, far);\n  this.scene.add(this.camera);\n}; // proto.initScene = function() {...}\n\nproto.initCube = function(imgUrl) {\n\t\n\tvar cubeSize = 100,\n\t\tmaterials;\n\t\n\tif(this.config.sphere) {\n\t// IF a sphereicaql image is to be used\n\t// > convert it from spherical projection (equirectangulat)\n\t//   to cubical projection (rectilinear)\n\t\tmaterials = this.loadEqui();\n\t} else if(this.config.tiles) {\n\t// ELSE IF the texture is proveded as separate tiles\n\t// > load each tile separatley\n\t\tmaterials = this.loadTiles();\n\t} else if(this.config.atlas) {\n\t// ELSE IF the texture is provided as a single Atlas image file\n\t// containing all the tiles\n\t// > load the atlas file and split it into tiles\n\t\tmaterials = this.loadAtlas();\n\t}\n\n\tthis.mesh = new THREE_Mesh( new THREE_BoxGeometry( cubeSize, cubeSize, cubeSize ), materials );\n\tthis.mesh.scale.x = -1; // flipping sphere inside-out - not the texture is rendered on the inner side\n\tthis.scene.add(this.mesh);\n\t\n\tthis.showLoader();\n\n}; // proto.initCube = function(imgUrl) {...}\n\nproto.loadTiles = function() {\n\n\tvar self = this;\n\tvar loadCounter=0;\n\tvar tiles = this.config.tiles;\n\tvar image_placeholder = document.createElement( 'canvas' );\n\n\t// the order of faces in the following array is IMPORTANT\n\tvar materials = [\n\t\t'right',\n\t\t'left',\n\t\t'top',\n\t\t'bottom',\n\t\t'back',\n\t\t'front',\n\t].map(function(key) {\n\t\tvar img = new Image(),\n\t\t\ttexture = new THREE_Texture(image_placeholder);\n\t\t\n\t\timg.onload = function() {\n\t\t\tconsole.log(tiles[key]);\n\t\t\ttexture.image = img;\n\t\t\ttexture.needsUpdate = true;\n\t\t\t\n\t\t\tif(++loadCounter===6) {\n\t\t\t\tself.hideLoader();\n\t\t\t}\n\t\t};\n\t\t\n\t\timg.src = tiles[key];\n\t\t\n\t\treturn(new THREE_MeshBasicMaterial({\n\t\t\tmap: texture\n\t\t}));\n\t});\n\t\n\treturn(materials);\n}; // proto.loadTiles = function() {...}\n\nproto.loadAtlas = function(imgUrl, materials, canvases) {\n\n\tvar self = this;\n\tvar imageObj=new Image();\n\n\tvar canvases = [0,1,2,3,4,5].map(function(el) {\n\t\treturn(document.createElement(\"canvas\"));\n\t});\n\n\tvar materials = canvases.map(function(canvas) {\n\t\treturn(new THREE_MeshBasicMaterial({\n\t\t\tmap: new THREE_Texture(canvas),\n\t\t}));\n\t});\n\t\n\tvar tile2canvasIx = {\n\t\tright:0,\n\t\tleft:1,\n\t\ttop:2,\n\t\tbottom:3,\n\t\tfront:4,\n\t\tback:5\n\t};\n\t\n\t// if the property is not set, then set the default order\n\tvar tileOrder = this.config.tileOrder || ['right','left','top','bottom','front','back'];\n\n\t// this needs to be set in order not to get \"Tainted canvases may not be loaded.\" WebGL error\n\timageObj.crossOrigin = \"anonymous\";\n\t\n\timageObj.onload = function() {\n\t\tvar tileWidth = imageObj.height;\n\n\t\ttileOrder.forEach(function(key) {\n\t\t\tvar ix = tile2canvasIx[key];\n\t\t\t\n\t\t\tvar canvas = canvases[ix];\n\t\t\tcanvas.height = tileWidth;\n\t\t\tcanvas.width = tileWidth;\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( imageObj, tileWidth * ix, 0, tileWidth, tileWidth, 0, 0, tileWidth, tileWidth );\n\t\t\n\t\t\tmaterials[ix].map.needsUpdate = true;\n\t\t\n\t\t});\n\t\t\n\t\tself.hideLoader();\n\t}; // imgObj.onload = function() {...}\n\t\n\timageObj.src = this.config.atlas;\n\t\n\treturn(materials);\n\n}; // proto.loadAtlas = function() {...}\n\nproto.loadEqui = function() {\n\n\tvar self = this;\n\tvar imgObj=new Image();\n\n\tvar canvases = [0,1,2,3,4,5].map(function(el) {\n\t\treturn(document.createElement(\"canvas\"));\n\t});\n\n\tvar materials = canvases.map(function(canvas) {\n\t\treturn(new THREE_MeshBasicMaterial({\n\t\t\tmap: new THREE_Texture(canvas),\n\t\t}));\n\t});\n\n\t// this needs to be sit in order not to get \"Tainted canvases may not be loaded.\" WebGL error\n\timgObj.crossOrigin = \"anonymous\";\n\t\n\timgObj.onload = function() {\n\t\t\n\t\tvar srcWidth = imgObj.width,\n\t\t\tsrcHeight = imgObj.height;\n\t\t\t\n\t\t// (3) when the image is loaded, start the conversion\n\t\tvar inCanvas = document.createElement('canvas');\n\t\tinCanvas.width = srcWidth;\n\t\tinCanvas.height = srcHeight;\n\n\t\tvar inCtx=inCanvas.getContext(\"2d\");\n\t\tinCtx.drawImage(imgObj,0,0);\n\n\t\tvar srcImg = inCtx.getImageData(0,0,srcWidth,srcHeight);\n\t\t\n\t\tself.equi2recti(srcImg, materials, canvases)\n\n\t}; // imgObj.onload = function() {...}\n\n\t// (2) start loading the image\n\timgObj.src = this.config.sphere;\n\n\treturn(materials);\n\t\n}; // proto.loadEqui = function() {...}\n\nproto.equi2recti = function(srcImg, materials, canvases) {\n\n\tvar self = this,\n\t\tfaceSize=srcImg.width/4;\n\n\tvar imgOut = new ImageData(faceSize, faceSize); \n\n\tvar tileIx2canvasIx = {\n\t\t0:5, // back\n\t\t1:1, // left\n\t\t2:4, // front\n\t\t3:0, // right\n\t\t4:2, // top\n\t\t5:3 // bottom\n\t};\n\t\n\tvar loadCounter = 0;\n\n\tvar onWorkerMessage = function(event) {\n\t// (4) as each image is converted apply it to canvas used as texture\n\t\t\n\t\tvar faceIx = event.data.faceIx,\n\t\t\tcanvasIx = tileIx2canvasIx[faceIx],\n\t\t\toneCanvas = canvases[canvasIx];\n\t\t\t\n\t\toneCanvas.width = faceSize;\n\t\toneCanvas.height = faceSize;\n\t\t\n\t\toneCanvas.getContext(\"2d\").putImageData(event.data.imgData,0,0);\n\t\t\n\t\tmaterials[canvasIx].map.needsUpdate = true;\n\n\t\tif(++loadCounter===6) {\n\t\t\tself.hideLoader();\n\t\t}\n\t};\n\n\tif(self.config.multiWorker) {\n\n\t\tfor(var i=0;i<6;i++) {\n\t\t\tvar w = new Worker(\"../src/equi2recti-worker.js\");\n\t\t\tw.onmessage = onWorkerMessage;\n\n\t\t\t// begin converting the images\n\t\t\tw.postMessage({\n\t\t\t\tsrcImg: srcImg,\n\t\t\t\timgOut: imgOut,\n\t\t\t\tfaceIx:i\n\t\t\t});\n\t\t}\n\t} else {\n\t\tvar w = new Worker(\"../src/equi2recti-worker.js\");\n\t\tw.onmessage = onWorkerMessage;\n\n\t\t// begin converting the images\n\t\tw.postMessage({\n\t\t\tsrcImg: srcImg,\n\t\t\timgOut: imgOut\n\t\t});\n\t}\n} // proto.equi2recti = function(srcImg, materials, canvases) {...}\n\nproto.initSphere = function() {\n\n  var speherRadius = 100,\n      sphere_H_segments = 64,\n      sphere_V_segments = 64;\n\n  this.imgLoader = new ProgressiveImgLoader();\n\n  this.loader_onDone = this.loader_onDone.bind(this);\n\n  this.imgLoader.addEventListener('done', this.loader_onDone);\n\n  var geometry = new THREE_SphereGeometry(speherRadius, sphere_H_segments, sphere_V_segments);\n\n  // check if a special UV mapping function should be used\n  if(this.config.uvMapper) {\n    this.config.uvMapper(geometry);\n  }\n\n  this.mesh = new THREE_Mesh(\n      geometry,\n      new THREE_MeshBasicMaterial({\n        map: this.imgLoader.load(this.config.sphere),\n        side: THREE_FrontSide // displaying the texture on the outer side of the sphere\n      })\n  );\n\n  this.mesh.scale.x = -1; // flipping sphere inside-out - not the texture is rendered on the inner side\n  this.scene.add(this.mesh);\n\n  this.showLoader();\n}; // proto.initSphere = function(imageUrls) {...}\n\nproto.initLogo = function(logoUrl, logoDistance) {\n\n  var texLoader = new THREE_TextureLoader(),\n    self = this;\n\n  texLoader.crossOrigin = '';\n\n  texLoader.load(logoUrl, function(texture) {\n    self.logo = new THREE_Mesh(\n        new THREE_PlaneGeometry(10,10),\n        new THREE_MeshBasicMaterial({\n          map: texture,\n          side: THREE_FrontSide,\n          transparent: true,\n          opacity: 1\n        })\n    );\n\n    self.logo.position.set(0,logoDistance,0);\n    self.logo.rotation.x = -Math.PI/2;\n\n    self.scene.add(self.logo);\n  });\n\n}; // proto.initLogo = function(imageUrls) {...}\n\n\n/*---------------------------------------------------------------------*//**\n * Method displays an icon with instructions on how to use the viewer\n *\n * @param      {string}  hintUrl  URL of the image containing instructions\n */\nproto.showHint = function(hintUrl) {\n\n  var texLoader = new THREE_TextureLoader(),\n    self = this;\n\n  texLoader.crossOrigin = '';\n\n  texLoader.load(hintUrl, function(texture) {\n    self.hint = new THREE_Mesh(\n          new THREE_PlaneGeometry(10,10),\n          new THREE_MeshBasicMaterial({\n            map: texture,\n            side: THREE_FrontSide,\n            transparent: true,\n            opacity: 1\n          })\n      );\n\n    self.hint.position.set(0,0,-30);\n    // self.hint.rotation.x = -Math.PI/4;\n\n    self.camera.add(self.hint);\n  });\n}; // proto.showHint = function(imageUrls) {...}\n\n/*---------------------------------------------------------------------*//**\n * Method hides the hint\n */\nproto.hideHint = function() {\n  if(this.hint) {\n    this.camera.remove(this.hint);\n    this.hint = null;\n  }\n}\n\nproto.initControls = function() {\n  this.controls = new SphereControls(this.camera, this.renderer.domElement, this.config.control);\n  this.controls_onTap = this.controls_onTap.bind(this);\n  this.controls.addEventListener('tap', this.controls_onTap);\n}; // proto.initControls = function() {...}\n\nproto.onResize = function(ev) {\n  var width = this.container.offsetWidth;\n  var height = this.container.offsetHeight;\n\n  if(this.camera) {\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  }\n\n  this.renderer.setSize(width, height);\n}; // proto.onResize = function(ev) {...}\n\nproto.render = function() {\n\n  if(this.isDisposed) {\n    return;\n  }\n\n  requestAnimationFrame(this.render.bind(this));\n\n  this.dispatchEvent({type:'preRender', original:event });\n\n  if(this.controls) {\n    this.controls.update();\n  }\n\n  if(this.spinLoader) {\n    this.spinLoader.animate();\n  }\n\n  this.renderer.render(this.scene, this.camera);\n}; // proto.render = function() {...}\n\nproto.showLoader = function() {\n  this.spinLoader = new BallSpinnerLoader(this.config.spinner);\n  this.camera.add(this.spinLoader.mesh);\n  this.spinLoader.mesh.position.set(0,0,-50);\n  \n}; // proto.showLoader = function() {...}\n\nproto.hideLoader = function() {\n  if(this.spinLoader) {\n    this.camera.remove(this.spinLoader.mesh);\n    this.spinLoader = null;\n  }\n}; // proto.hideLoader = function() { ... }\n\nproto.loader_onDone = function() {\n  this.loader_onDone = null; // loader mi više nije potreban\n  this.hideLoader();\n};\n\nproto.dispose = function() {\n\n  window.removeEventListener('resize', this.onResize);\n\n  if(this.closeButton) {\n    this.closeButton.removeEventListener('click', this.closeButton_onClick);\n  }\n\n  this.controls.removeEventListener('tap', this.controls_onTap);\n\n  this.imgLoader.dispose();\n\n  this.isDisposed = true;\n  this.container.remove();\n\n  // restoring original viewport meta\n  $('head meta[name=\"viewport\"]').attr('content', this.originalViewPortMeta);\n\n  this.loaderEl = this.imgLoader = this.closeButton = this.container = this.renderer = this.container = this.camera = this.scene = this.sphere = this.controls = null;\n\n}; // proto.dispose = function() {...}\n\nexport { SphereViewer as Viewer }\n\n\n// WEBPACK FOOTER //\n// ./src/sphereViewer.js"],"sourceRoot":""}