{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5fa9595d567ec4ff0cf6","webpack:///external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack:///./src/viewer.js","webpack:///./src/ballSpinnerLoader.js","webpack:///./src/progressiveImgLoader.js","webpack:///./src/sphereControls.js","webpack:///./src/sphereViewer.js","webpack:///external {\"commonjs\":\"jquery-slim\",\"commonjs2\":\"jquery-slim\",\"amd\":\"jquery-slim\",\"root\":\"$\"}"],"names":["Viewer","imageUrls","config","isDisposed","showCloseButton","initViewport","initScene","initSphere","logo","initLogo","logoDistance","hint","showHint","initControls","onResize","bind","window","addEventListener","setTimeout","render","proto","prototype","Object","create","nativeW","devicePixelRatio","screen","availWidth","scale","viewportMeta","originalViewPortMeta","attr","isMobile","container","document","createElement","className","closeButton","innerHTML","appendChild","closeButton_onClick","getElementsByTagName","dispose","controls_onTap","ev","hideHint","body","renderer","setSize","scrollWidth","scrollHeight","domElement","scene","fieldOfView","aspectRatio","near","far","camera","add","speherRadius","sphere_H_segments","sphere_V_segments","imgLoader","loader_onDone","geometry","uvMapper","sphere","map","load","side","x","showLoader","logoUrl","texLoader","self","crossOrigin","texture","transparent","opacity","position","set","rotation","Math","PI","hintUrl","remove","controls","control","width","offsetWidth","height","offsetHeight","aspect","updateProjectionMatrix","requestAnimationFrame","dispatchEvent","type","original","event","update","spinLoader","animate","spinner","mesh","hideLoader","removeEventListener","loaderEl","BallSpinnerLoader","groupRadius","circleCount","circleRadius","groupAngle","animationAmplitude","circles","initGroup","makeCircle","radius","circleSegments","segments","circleGeometry","circleMaterial","color","opacityStep","addToScene","currOpacity","animationStep","currAngle","angleStep","i","oneCircle","pos","polar2cartesian","distance","radians","y","push","polar","round","cos","sin","z","zStep","length","newOpacity","material","newRadius","ProgressiveImgLoader","images","imageObj","Image","loadingIx","onload","needsUpdate","imageIndex","src","image","SphereControls","undefined","onDocumentMouseDown","onDocumentMouseMove","onDocumentMouseUp","onDocumentMouseWheel","onDocumentTouchStart","onDocumentTouchEnd","onDocumentTouchMove","initialTime","lubrication","_isUserInteracting","_dragStartPosition","lat","lon","_curr","phi","theta","time","_prev","time2","_target","_speed","_autoRotation","enabled","autoRotate","suspended","speed","max","min","autoRotateSpeed","autoRotateDirection","delay","autoRotateDelay","timeout","preventDefault","autoRotate_Stop","radToDeg","clientX","clientY","autoRotate_Start","fov","deltaY","touches","stopPropagation","pageX","pageY","clearTimeout","degToRad","lookAt"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AChEA,+C;;;;;;;;;;;;;;;;;QCgEgBA,M,GAAAA,M;;AAnBhB;;AAaA;;;;AAEA;;AACA;;AACA;;;;AAEO,SAASA,MAAT,CAAgBC,SAAhB,EAA2BC,MAA3B,EAAmC;;AAExC,OAAKC,UAAL,GAAkB,KAAlB;AACA,OAAKD,MAAL,GAAcA,SAASA,UAAU,EAAjC;;AAEAA,SAAOE,eAAP,GAAyB,CAAC,CAACF,OAAOE,eAAlC;;AAEA,OAAKC,YAAL;AACA,OAAKC,SAAL;AACA,OAAKC,UAAL,CAAgBN,SAAhB;;AAEA,MAAG,KAAKC,MAAL,CAAYM,IAAf,EAAqB;AACnB,SAAKC,QAAL,CAAc,KAAKP,MAAL,CAAYM,IAA1B,EAAgC,KAAKN,MAAL,CAAYQ,YAAZ,KAA2B,KAAK,CAAhC,GAAoC,CAAC,EAArC,GAA0C,KAAKR,MAAL,CAAYQ,YAAtF;AACD;;AAED,MAAG,KAAKR,MAAL,CAAYS,IAAf,EAAqB;AACnB,SAAKC,QAAL,CAAc,KAAKV,MAAL,CAAYS,IAA1B;AACD;;AAED,OAAKE,YAAL;;AAEA;AACA;AACA,OAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;;AAEAC,SAAOC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKH,QAAvC,EAAiD,KAAjD;AACAE,SAAOE,UAAP,CAAkB,KAAKJ,QAAvB,EAAiC,CAAjC;;AAEA,OAAKK,MAAL;AACD,C,CA7FD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FC;;AAED,IAAIC,QAAQpB,OAAOqB,SAAP,GAAmBC,OAAOC,MAAP,CAAe,uBAAsBF,SAArC,CAA/B;;AAEAD,MAAMf,YAAN,GAAqB,YAAW;;AAE5B,MAAImB,UAAUR,OAAOS,gBAAP,GAA0BT,OAAOU,MAAP,CAAcC,UAAtD;AAAA,MACIC,QAAQ,IAAEZ,OAAOS,gBADrB;AAAA,MAEII,eAAe,0BAAE,4BAAF,CAFnB;;AAIA,OAAKC,oBAAL,GAA4BD,aAAaE,IAAb,CAAkB,SAAlB,CAA5B;AACAF,eAAaE,IAAb,CAAkB,SAAlB,EAA6B,mBAAiBH,KAAjB,GAAuB,kBAAvB,GAA0CA,KAA1C,GAAgD,mBAA7E;;AAEA;AACA,MAAII,WAAWhB,OAAOS,gBAAP,KAA0B,CAAzC;;AAEA,OAAKQ,SAAL,GAAiBC,SAASC,aAAT,CAAuB,KAAvB,CAAjB;AACA,OAAKF,SAAL,CAAeG,SAAf,GAA2B,uBAAuBJ,WAAW,UAAX,GAAwB,WAA/C,CAA3B;;AAEA,MAAG,KAAK9B,MAAL,CAAYE,eAAf,EAAgC;AAC9B,SAAKiC,WAAL,GAAmBH,SAASC,aAAT,CAAuB,GAAvB,CAAnB;AACA,SAAKE,WAAL,CAAiBD,SAAjB,GAA6B,+BAA7B;AACA,SAAKC,WAAL,CAAiBC,SAAjB,GAA6B,eAA7B;AACA,SAAKL,SAAL,CAAeM,WAAf,CAA2B,KAAKF,WAAhC;AACA;AACA;AACA,SAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBzB,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKsB,WAAL,CAAiBpB,gBAAjB,CAAkC,OAAlC,EAA2C,KAAKuB,mBAAhD;AACD;;AAEDN,WAASO,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCF,WAAzC,CAAqD,KAAKN,SAA1D;AAED,CA5BH,C,CA4BK;;AAELb,MAAMoB,mBAAN,GAA4B,YAAW;AACrC,OAAKE,OAAL;AACD,CAFD;AAGAtB,MAAMuB,cAAN,GAAuB,UAASC,EAAT,EAAa;AAClC;AACA,OAAKC,QAAL;AACD,CAHD;;AAKAzB,MAAMd,SAAN,GAAkB,YAAW;;AAE3B,MAAIwC,OAAOZ,SAASO,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAX;;AAEA,OAAKM,QAAL,GAAgB,0BAAhB;;AAEA,OAAKA,QAAL,CAAcC,OAAd,CAAsBF,KAAKG,WAA3B,EAAwCH,KAAKI,YAA7C;AACA,OAAKjB,SAAL,CAAeM,WAAf,CAA2B,KAAKQ,QAAL,CAAcI,UAAzC;;AAEA,OAAKC,KAAL,GAAa,kBAAb;;AAEA,MAAIC,cAAc,EAAlB;AAAA,MACIC,cAAc,CADlB;AAAA,MAEIC,OAAO,CAFX;AAAA,MAIIC,MAAM,IAJV;;AAMA,OAAKC,MAAL,GAAc,6BAA4BJ,WAA5B,EAAyCC,WAAzC,EAAsDC,IAAtD,EAA4DC,GAA5D,CAAd;AACA,OAAKJ,KAAL,CAAWM,GAAX,CAAe,KAAKD,MAApB;AACD,CAnBD,C,CAmBG;;AAEHrC,MAAMb,UAAN,GAAmB,UAASN,SAAT,EAAoB;;AAErC,MAAI0D,eAAe,GAAnB;AAAA,MACIC,oBAAoB,EADxB;AAAA,MAEIC,oBAAoB,EAFxB;;AAIA,OAAKC,SAAL,GAAiB,gDAAjB;;AAEA,OAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBhD,IAAnB,CAAwB,IAAxB,CAArB;;AAEA,OAAK+C,SAAL,CAAe7C,gBAAf,CAAgC,MAAhC,EAAwC,KAAK8C,aAA7C;;AAEA,MAAIC,WAAW,0BAAyBL,YAAzB,EAAuCC,iBAAvC,EAA0DC,iBAA1D,CAAf;;AAEA;AACA,MAAG,KAAK3D,MAAL,CAAY+D,QAAf,EAAyB;AACvB,SAAK/D,MAAL,CAAY+D,QAAZ,CAAqBD,QAArB;AACD;;AAED,OAAKE,MAAL,GAAc,gBACVF,QADU,EAEV,6BAA4B;AAC1BG,SAAK,KAAKL,SAAL,CAAeM,IAAf,CAAoBnE,SAApB,CADqB;AAE1BoE,0BAF0B,CAEJ;AAFI,GAA5B,CAFU,CAAd;;AAQA,OAAKH,MAAL,CAAYtC,KAAZ,CAAkB0C,CAAlB,GAAsB,CAAC,CAAvB,CA3BqC,CA2BX;AAC1B,OAAKlB,KAAL,CAAWM,GAAX,CAAe,KAAKQ,MAApB;;AAEA,OAAKK,UAAL;AAED,CAhCD,C,CAgCG;;AAEHnD,MAAMX,QAAN,GAAiB,UAAS+D,OAAT,EAAkB9D,YAAlB,EAAgC;;AAE/C,MAAI+D,YAAY,0BAAhB;AAAA,MACEC,OAAO,IADT;;AAGAD,YAAUE,WAAV,GAAwB,EAAxB;;AAEAF,YAAUL,IAAV,CAAeI,OAAf,EAAwB,UAASI,OAAT,EAAkB;AACxCF,SAAKlE,IAAL,GAAY,gBACR,yBAAwB,EAAxB,EAA2B,EAA3B,CADQ,EAER,6BAA4B;AAC1B2D,WAAKS,OADqB;AAE1BP,4BAF0B;AAG1BQ,mBAAa,IAHa;AAI1BC,eAAS;AAJiB,KAA5B,CAFQ,CAAZ;;AAUAJ,SAAKlE,IAAL,CAAUuE,QAAV,CAAmBC,GAAnB,CAAuB,CAAvB,EAAyBtE,YAAzB,EAAsC,CAAtC;AACAgE,SAAKlE,IAAL,CAAUyE,QAAV,CAAmBX,CAAnB,GAAuB,CAACY,KAAKC,EAAN,GAAS,CAAhC;;AAEAT,SAAKtB,KAAL,CAAWM,GAAX,CAAegB,KAAKlE,IAApB;AACD,GAfD;AAiBD,CAxBD,C,CAwBG;;;AAGH,yE,CAAyE;;;;;AAKzEY,MAAMR,QAAN,GAAiB,UAASwE,OAAT,EAAkB;;AAEjC,MAAIX,YAAY,0BAAhB;AAAA,MACEC,OAAO,IADT;;AAGAD,YAAUE,WAAV,GAAwB,EAAxB;;AAEAF,YAAUL,IAAV,CAAegB,OAAf,EAAwB,UAASR,OAAT,EAAkB;AACxCF,SAAK/D,IAAL,GAAY,gBACN,yBAAwB,EAAxB,EAA2B,EAA3B,CADM,EAEN,6BAA4B;AAC1BwD,WAAKS,OADqB;AAE1BP,4BAF0B;AAG1BQ,mBAAa,IAHa;AAI1BC,eAAS;AAJiB,KAA5B,CAFM,CAAZ;;AAUAJ,SAAK/D,IAAL,CAAUoE,QAAV,CAAmBC,GAAnB,CAAuB,CAAvB,EAAyB,CAAzB,EAA2B,CAAC,EAA5B;AACA;;AAEAN,SAAKjB,MAAL,CAAYC,GAAZ,CAAgBgB,KAAK/D,IAArB;AACD,GAfD;AAgBD,CAvBD,C,CAuBG;;AAEH,yE,CAAyE;;;AAGzES,MAAMyB,QAAN,GAAiB,YAAW;AAC1B,MAAG,KAAKlC,IAAR,EAAc;AACZ,SAAK8C,MAAL,CAAY4B,MAAZ,CAAmB,KAAK1E,IAAxB;AACA,SAAKA,IAAL,GAAY,IAAZ;AACD;AACF,CALD;;AAOAS,MAAMP,YAAN,GAAqB,YAAW;AAC9B,OAAKyE,QAAL,GAAgB,mCAAmB,KAAK7B,MAAxB,EAAgC,KAAKV,QAAL,CAAcI,UAA9C,EAA0D,KAAKjD,MAAL,CAAYqF,OAAtE,CAAhB;AACA,OAAK5C,cAAL,GAAsB,KAAKA,cAAL,CAAoB5B,IAApB,CAAyB,IAAzB,CAAtB;AACA,OAAKuE,QAAL,CAAcrE,gBAAd,CAA+B,KAA/B,EAAsC,KAAK0B,cAA3C;AACD,CAJD,C,CAIG;;AAEHvB,MAAMN,QAAN,GAAiB,UAAS8B,EAAT,EAAa;AAC5B,MAAI4C,QAAQ,KAAKvD,SAAL,CAAewD,WAA3B;AACA,MAAIC,SAAS,KAAKzD,SAAL,CAAe0D,YAA5B;;AAEA,MAAG,KAAKlC,MAAR,EAAgB;AACd,SAAKA,MAAL,CAAYmC,MAAZ,GAAqBJ,QAAQE,MAA7B;AACA,SAAKjC,MAAL,CAAYoC,sBAAZ;AACD;;AAED,OAAK9C,QAAL,CAAcC,OAAd,CAAsBwC,KAAtB,EAA6BE,MAA7B;AACD,CAVD,C,CAUG;;AAEHtE,MAAMD,MAAN,GAAe,YAAW;;AAExB,MAAG,KAAKhB,UAAR,EAAoB;AAClB;AACD;;AAED2F,wBAAsB,KAAK3E,MAAL,CAAYJ,IAAZ,CAAiB,IAAjB,CAAtB;;AAEA,OAAKgF,aAAL,CAAmB,EAACC,MAAK,WAAN,EAAmBC,UAASC,KAA5B,EAAnB;;AAEA,MAAG,KAAKZ,QAAR,EAAkB;AAChB,SAAKA,QAAL,CAAca,MAAd;AACD;;AAED,MAAG,KAAKC,UAAR,EAAoB;AAClB,SAAKA,UAAL,CAAgBC,OAAhB;AACD;;AAED,OAAKtD,QAAL,CAAc5B,MAAd,CAAqB,KAAKiC,KAA1B,EAAiC,KAAKK,MAAtC;AACD,CAnBD,C,CAmBG;;AAEHrC,MAAMmD,UAAN,GAAmB,YAAW;AAC5B,OAAK6B,UAAL,GAAkB,yCAAsB,KAAKlG,MAAL,CAAYoG,OAAlC,CAAlB;AACA,OAAK7C,MAAL,CAAYC,GAAZ,CAAgB,KAAK0C,UAAL,CAAgBG,IAAhC;AACA,OAAKH,UAAL,CAAgBG,IAAhB,CAAqBxB,QAArB,CAA8BC,GAA9B,CAAkC,CAAlC,EAAoC,CAApC,EAAsC,CAAC,EAAvC;AAED,CALD,C,CAKG;;AAEH5D,MAAMoF,UAAN,GAAmB,YAAW;AAC5B,MAAG,KAAKJ,UAAR,EAAoB;AAClB,SAAK3C,MAAL,CAAY4B,MAAZ,CAAmB,KAAKe,UAAL,CAAgBG,IAAnC;AACA,SAAKH,UAAL,GAAkB,IAAlB;AACD;AACF,CALD,C,CAKG;;AAEHhF,MAAM2C,aAAN,GAAsB,YAAW;AAC/B,OAAKA,aAAL,GAAqB,IAArB,CAD+B,CACJ;AAC3B,OAAKyC,UAAL;AACD,CAHD;;AAKApF,MAAMsB,OAAN,GAAgB,YAAW;;AAEzB1B,SAAOyF,mBAAP,CAA2B,QAA3B,EAAqC,KAAK3F,QAA1C;;AAEA,MAAG,KAAKuB,WAAR,EAAqB;AACnB,SAAKA,WAAL,CAAiBoE,mBAAjB,CAAqC,OAArC,EAA8C,KAAKjE,mBAAnD;AACD;;AAED,OAAK8C,QAAL,CAAcmB,mBAAd,CAAkC,KAAlC,EAAyC,KAAK9D,cAA9C;;AAEA,OAAKmB,SAAL,CAAepB,OAAf;;AAEA,OAAKvC,UAAL,GAAkB,IAAlB;AACA,OAAK8B,SAAL,CAAeoD,MAAf;;AAEA;AACA,4BAAE,4BAAF,EAAgCtD,IAAhC,CAAqC,SAArC,EAAgD,KAAKD,oBAArD;;AAEA,OAAK4E,QAAL,GAAgB,KAAK5C,SAAL,GAAiB,KAAKzB,WAAL,GAAmB,KAAKJ,SAAL,GAAiB,KAAKc,QAAL,GAAgB,KAAKd,SAAL,GAAiB,KAAKwB,MAAL,GAAc,KAAKL,KAAL,GAAa,KAAKc,MAAL,GAAc,KAAKoB,QAAL,GAAgB,IAA/J;AAED,CApBD,C,CAoBG,mC;;;;;;;;;;;;;;;;;;;ACpSH;;AASA,IAAIqB,oBAAoB,SAApBA,iBAAoB,CAASzG,MAAT,EAAiB;AACvCA,WAASA,UAAW,EAApB;;AAEA,OAAK0G,WAAL,GAAmB1G,OAAO0G,WAAP,IAAsB,EAAzC;AACA,OAAKC,WAAL,GAAmB3G,OAAO2G,WAAP,IAAsB,CAAzC;AACA,OAAKC,YAAL,GAAoB5G,OAAO4G,YAAP,IAAuB,CAA3C;AACA,OAAKC,UAAL,GAAkB,CAAlB;;AAEA;AACA;AACA;AACA,OAAKC,kBAAL,GAA0B9G,OAAO8G,kBAAP,IAA6B,EAAvD;;AAEA,OAAKC,OAAL,GAAe,EAAf;AACA,OAAKV,IAAL,GAAY,KAAKW,SAAL,EAAZ;AACD,CAfD,C,CApDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEAP,kBAAkBtF,SAAlB,GAA8B;AAC5B8F,cAAY,oBAASjH,MAAT,EAAiB;AAC3BA,aAASA,UAAU,EAAnB;AACA,QAAI4G,eAAe5G,OAAOkH,MAAP,IAAiB,CAApC;AAAA,QACIC,iBAAiBnH,OAAOoH,QAAP,IAAmB,EADxC;AAAA,QAC4C;AACxCC,qBAAiB,0BAA0BT,YAA1B,EAAwCO,cAAxC,CAFrB;AAAA,QAGIG,iBAAiB,6BAA4B,EAAEC,OAAO,QAAT,EAAmB5C,aAAY,IAA/B,EAAqCC,SAAS5E,OAAO4E,OAArD,EAA8DT,uBAA9D,EAA5B,CAHrB;;AAKA,WAAO;AACLkC,YAAM,gBAAegB,cAAf,EAA+BC,cAA/B,CADD;AAELE,mBAAaxH,OAAOwH,WAAP,IAAsB;AAF9B,KAAP;AAID,GAZ2B;AAa5BC,cAAW,oBAASvE,KAAT,EAAgB;AACzBA,UAAMM,GAAN,CAAU,KAAK6C,IAAf;AACD,GAf2B;AAgB5BW,aAAW,qBAAW;AACpB,QAAIX,OAAO,qBAAX;;AACI;AACA;AACA;AACAqB,kBAAc,CAJlB;AAAA,QAKIF,cAAc,KAAK,KAAKb,WAAL,GAAiB,CAAjB,GAAmB,CAAxB,CALlB;;AAMI;AACAgB,oBAAgB,IAPpB;;AAQI;AACAC,gBAAY,CAThB;AAAA,QAUIC,YAAY,IAAE7C,KAAKC,EAAP,GAAY,KAAK0B,WAVjC;;AAYA,SAAI,IAAImB,IAAE,CAAV,EAAYA,IAAE,KAAKnB,WAAnB,EAA+BmB,GAA/B,EAAoC;;AAElCJ,qBAAaF,WAAb;;AAEA,UAAGE,cAAY,CAAf,EAAkB;AAClB;AACA;AACEA,sBAAc,IAAEF,WAAhB;AACAA,sBAAc,CAACA,WAAf;AACA;AACA;AACA;AACA;AACA;AACAG,wBAAgB,CAACA,aAAjB;AACD;;AAED,UAAII,YAAY,KAAKd,UAAL,CAAgB,EAACrC,SAAQ8C,WAAT,EAAsBF,aAAaG,aAAnC,EAAkDT,QAAQ,KAAKN,YAA/D,EAAhB,CAAhB;;AAEA;AACA,UAAIoB,MAAM,KAAKC,eAAL,CAAqB,EAAEC,UAAU,KAAKxB,WAAjB,EAA8ByB,SAASP,SAAvC,EAArB,CAAV;AACAG,gBAAU1B,IAAV,CAAexB,QAAf,CAAwBC,GAAxB,CAA4BkD,IAAI5D,CAAhC,EAAmC4D,IAAII,CAAvC,EAA0CV,cAAY,KAAKZ,kBAA3D;;AAEAc,mBAAWC,SAAX;;AAEAxB,WAAK7C,GAAL,CAASuE,UAAU1B,IAAnB;AACA,WAAKU,OAAL,CAAasB,IAAb,CAAkBN,SAAlB;AACD;;AAED,WAAO1B,IAAP;AACD,GA3D2B;AA4D5B4B,mBAAiB,yBAASK,KAAT,EAAgB;AAC/B,WAAO;AACLlE,SAAGY,KAAKuD,KAAL,CAAWD,MAAMJ,QAAN,GAAiBlD,KAAKwD,GAAL,CAASF,MAAMH,OAAf,CAAjB,GAAyC,IAApD,IAA0D,IADxD;AAELC,SAAGpD,KAAKuD,KAAL,CAAWD,MAAMJ,QAAN,GAAiBlD,KAAKyD,GAAL,CAASH,MAAMH,OAAf,CAAjB,GAAyC,IAApD,IAA0D;AAFxD,KAAP;AAID,GAjE2B;AAkE5BhC,WAAS,mBAAW;AAClB,SAAKE,IAAL,CAAUtB,QAAV,CAAmB2D,CAAnB,IAAsB,IAAtB;AACA,QAAI3B,UAAU,KAAKA,OAAnB;AACA,QAAI4B,QAAQ,MAAM,KAAKhC,WAAL,GAAiB,CAAjB,GAAmB,CAAzB,CAAZ;;AAEA,SAAI,IAAImB,IAAE,CAAV,EAAaA,IAAEf,QAAQ6B,MAAvB,EAA+Bd,GAA/B,EAAoC;AAClC,UAAIC,YAAYhB,QAAQe,CAAR,CAAhB;AAAA,UACIe,aAAad,UAAU1B,IAAV,CAAeyC,QAAf,CAAwBlE,OAAxB,GAAkCmD,UAAUP,WAD7D;AAAA,UAEIuB,YAAYhB,UAAU1B,IAAV,CAAevC,QAAf,CAAwBoD,MAFxC;;AAIA,UAAG2B,aAAW,CAAd,EAAiB;AACfA,qBAAa,IAAEd,UAAUP,WAAzB;AACAO,kBAAUP,WAAV,GAAsB,CAACO,UAAUP,WAAjC;AACD,OAHD,MAGO,IAAGqB,aAAW,CAAd,EAAiB;AACtBA,qBAAad,UAAUP,WAAvB;AACAO,kBAAUP,WAAV,GAAsB,CAACO,UAAUP,WAAjC;AACD;;AAEDO,gBAAU1B,IAAV,CAAeyC,QAAf,CAAwBlE,OAAxB,GAAkCiE,UAAlC;AACAd,gBAAU1B,IAAV,CAAexB,QAAf,CAAwB6D,CAAxB,GAA4BG,aAAW,KAAK/B,kBAA5C;AACD;AACF;AAvF2B,CAA9B;;QA0FSL,iB,GAAAA,iB;;;;;;;;;;;;;;;;;;;ACvHT;;AAKA,IAAIuC,uBAAuB,SAAvBA,oBAAuB,GAAW,CAAG,CAAzC,C,CA7CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,IAAI9H,QAAQ8H,qBAAqB7H,SAArB,GAAiCC,OAAOC,MAAP,CAAe,uBAAsBF,SAArC,CAA7C;;AAEAD,MAAMgD,IAAN,GAAa,UAAS+E,MAAT,EAAiB;;AAE5B,MAAIzE,OAAO,IAAX;;AAEA,MAAIE,UAAU,oBAAd;;AAEA;AACA,MAAIwE,WAAW1E,KAAK0E,QAAL,GAAgB,IAAIC,KAAJ,EAA/B;AAAA,MACIC,YAAY,CADhB;;AAGA;AACAF,WAASzE,WAAT,GAAuB,WAAvB;;AAEAyE,WAASG,MAAT,GAAkB,YAAW;;AAE3B;AACA,QAAG7E,KAAK0E,QAAR,EAAkB;;AAEhBxE,cAAQ4E,WAAR,GAAsB,IAAtB;;AAEA,UAAGF,YAAYH,OAAOL,MAAtB,EAA8B;AAC5BpE,aAAKqB,aAAL,CAAmB,EAACC,MAAM,UAAP,EAAmByD,YAAYH,SAA/B,EAAnB;;AAEA;AACAtI,eAAOE,UAAP,CAAkB,YAAW;AAC3BkI,mBAASM,GAAT,GAAeP,OAAOG,WAAP,CAAf;AACD,SAFD,EAEG,IAFH;AAID,OARD,MAQO;AACL5E,aAAKqB,aAAL,CAAmB,EAACC,MAAM,MAAP,EAAnB;AACAtB,aAAK0E,QAAL,GAAgB,IAAhB;AACD;AAEF;AAEF,GAtBD,CAb4B,CAmCzB;;AAEH;AACAA,WAASM,GAAT,GAAeP,OAAOG,WAAP,CAAf;AACA1E,UAAQ+E,KAAR,GAAgBP,QAAhB;;AAEA,SAAOxE,OAAP;AAED,CA3CD,C,CA2CG;;AAEHxD,MAAMsB,OAAN,GAAgB,YAAW;AACzB;AACA,MAAG,KAAK0G,QAAR,EAAkB;AAChB,SAAKA,QAAL,CAAcM,GAAd,GAAoB,EAApB;AACD;AACD,OAAKN,QAAL,GAAgB,IAAhB;AACD,CAND;;QAQQF,oB,GAAAA,oB;;;;;;;;;;;;;;;;;;;ACnER;;AAMA,IAAIU,iBAAiB,SAAjBA,cAAiB,CAAUnG,MAAV,EAAkBN,UAAlB,EAA8BjD,MAA9B,EAAsC;;AAE1D,KAAIwE,OAAO,IAAX;;AAEAxE,UAASA,UAAU,EAAnB;;AAEAiD,cAAeA,eAAe0G,SAAjB,GAA+B1G,UAA/B,GAA4CjB,QAAzD;AACAiB,YAAWlC,gBAAX,CAA6B,WAA7B,EAA0C6I,mBAA1C,EAA+D,KAA/D;AACA3G,YAAWlC,gBAAX,CAA6B,WAA7B,EAA0C8I,mBAA1C,EAA+D,KAA/D;AACA5G,YAAWlC,gBAAX,CAA6B,SAA7B,EAAwC+I,iBAAxC,EAA2D,KAA3D;AACA7G,YAAWlC,gBAAX,CAA6B,OAA7B,EAAsCgJ,oBAAtC,EAA4D,KAA5D;AACA9G,YAAWlC,gBAAX,CAA6B,YAA7B,EAA2CiJ,oBAA3C,EAAiE,KAAjE;AACA/G,YAAWlC,gBAAX,CAA6B,UAA7B,EAAyCkJ,kBAAzC,EAA6D,KAA7D;AACAhH,YAAWlC,gBAAX,CAA6B,WAA7B,EAA0CmJ,mBAA1C,EAA+D,KAA/D;;AAEA;AACA;AACA;AACA,KAAIC,cAAc,CAAlB;;AACC;AACA;AACAC,eAAc,EAHf;;AAKA,KAAIC,qBAAqB,KAAzB;AAAA,KACCC,qBAAoB;AACnBlG,KAAG,IADgB;AAEnBgE,KAAG,IAFgB;AAGnBmC,OAAK,IAHc;AAInBC,OAAK;AAJc,EADrB;AAAA,KAOCC,QAAQ;AACP5F,YAAU;AACT2F,QAAK,EADI;AAETD,QAAK,CAFI;AAGTG,QAAK1F,KAAKC,EAAL,GAAQ,CAHJ;AAIT0F,UAAO;AAJE,GADH;AAOPC,QAAMT;AAPC,EAPT;AAAA,KAgBCU,QAAQ;AACPhG,YAAU;AACT6F,QAAKD,MAAM5F,QAAN,CAAe6F,GADX;AAETC,UAAOF,MAAM5F,QAAN,CAAe8F;AAFb,GADH;AAKPG,SAAO;AALA,EAhBT;AAAA,KAuBCC,UAAU,oBAvBX;AAAA,KAwBCC,SAAS;AACRN,OAAK,CADG;AAERC,SAAO;AAFC,EAxBV;AAAA,KA4BCM,gBAAgB;AACfC,WAAS,CAAC,CAAClL,OAAOmL,UADH;AAEfC,aAAW,CAACpL,OAAOmL,UAFJ;AAGfE,SAAOrG,KAAKsG,GAAL,CAAS,CAAT,EAAYtG,KAAKuG,GAAL,CAAS,EAAT,EAAavL,OAAOwL,eAAP,IAA0B,CAAvC,CAAZ,IAAyD,IAAzD,IAAiExL,OAAOyL,mBAAP,KAA6B,CAAC,CAA9B,GAAkC,CAAC,CAAnC,GAAuC,CAAxG,CAHQ;AAIfC,SAAO1G,KAAKsG,GAAL,CAAStL,OAAO2L,eAAP,IAA0B,IAAnC,EAAyC,IAAzC,CAJQ,EAIwC;AACvDC,WAAS;;AALM,EA5BjB;;AAqCA,UAAShC,mBAAT,CAA8B5D,KAA9B,EAAsC;;AAErC;AACAxB,OAAKqB,aAAL,CAAmB,EAACC,MAAK,KAAN,EAAaC,UAASC,KAAtB,EAAnB;;AAEAA,QAAM6F,cAAN;;AAEAxB,uBAAqB,IAArB;AACAyB;;AAEArB,QAAM5F,QAAN,CAAe2F,GAAf,GAAqB,YAAWuB,QAAX,CAAqBtB,MAAM5F,QAAN,CAAe8F,KAApC,CAArB;AACAF,QAAM5F,QAAN,CAAe0F,GAAf,GAAqB,KAAK,YAAWwB,QAAX,CAAqBtB,MAAM5F,QAAN,CAAe6F,GAApC,CAA1B;;AAEAJ,qBAAmBlG,CAAnB,GAAuB4B,MAAMgG,OAA7B;AACA1B,qBAAmBlC,CAAnB,GAAuBpC,MAAMiG,OAA7B;AACA3B,qBAAmBE,GAAnB,GAAyBC,MAAM5F,QAAN,CAAe2F,GAAxC;AACAF,qBAAmBC,GAAnB,GAAyBE,MAAM5F,QAAN,CAAe0F,GAAxC;AACA;AACD,UAASV,mBAAT,CAA8B7D,KAA9B,EAAsC;AACrC,MAAKqE,uBAAuB,IAA5B,EAAmC;AAClCI,SAAM5F,QAAN,CAAe2F,GAAf,GAAqB,CAAEF,mBAAmBlG,CAAnB,GAAuB4B,MAAMgG,OAA/B,IAA2C,GAA3C,GAAiD1B,mBAAmBE,GAAzF;AACAC,SAAM5F,QAAN,CAAe0F,GAAf,GAAqB,CAAEvE,MAAMiG,OAAN,GAAgB3B,mBAAmBlC,CAArC,IAA2C,GAA3C,GAAiDkC,mBAAmBC,GAAzF;AACA;AACD/F,OAAKqB,aAAL,CAAmB,EAACC,MAAK,WAAN,EAAmBC,UAASC,KAA5B,EAAnB;AACA;AACD,UAAS8D,iBAAT,CAA4B9D,KAA5B,EAAoC;AACnCqE,uBAAqB,KAArB;AACArE,QAAM6F,cAAN;AACAK;AACA;AACD,UAASnC,oBAAT,CAA+B/D,KAA/B,EAAuC;AACtCzC,SAAO4I,GAAP,IAAcnG,MAAMoG,MAAN,GAAe,IAA7B;AACA7I,SAAOoC,sBAAP;AACA;AACD,UAASqE,oBAAT,CAA+BhE,KAA/B,EAAuC;AACtC,MAAKA,MAAMqG,OAAN,CAAczD,MAAd,IAAwB,CAA7B,EAAiC;;AAEhCyB,wBAAqB,IAArB;AACAyB;;AAEA;AACAtH,QAAKqB,aAAL,CAAmB,EAACC,MAAK,KAAN,EAAaC,UAASC,KAAtB,EAAnB;;AAEAA,SAAM6F,cAAN;AACA7F,SAAMsG,eAAN;AACAhC,sBAAmBlG,CAAnB,GAAuB4B,MAAMqG,OAAN,CAAe,CAAf,EAAmBE,KAA1C;AACAjC,sBAAmBlC,CAAnB,GAAuBpC,MAAMqG,OAAN,CAAe,CAAf,EAAmBG,KAA1C;;AAEA/B,SAAM5F,QAAN,CAAe2F,GAAf,GAAqB,YAAWuB,QAAX,CAAqBtB,MAAM5F,QAAN,CAAe8F,KAApC,CAArB;AACAF,SAAM5F,QAAN,CAAe0F,GAAf,GAAqB,KAAK,YAAWwB,QAAX,CAAqBtB,MAAM5F,QAAN,CAAe6F,GAApC,CAA1B;;AAEAJ,sBAAmBE,GAAnB,GAAyBC,MAAM5F,QAAN,CAAe2F,GAAxC;AACAF,sBAAmBC,GAAnB,GAAyBE,MAAM5F,QAAN,CAAe0F,GAAxC;AACA;AACD;AACD,UAASL,mBAAT,CAA8BlE,KAA9B,EAAsC;AACrC,MAAKA,MAAMqG,OAAN,CAAczD,MAAd,IAAwB,CAA7B,EAAiC;AAChC5C,SAAM6F,cAAN;AACA7F,SAAMsG,eAAN;;AAEA7B,SAAM5F,QAAN,CAAe2F,GAAf,GAAqB,CAAEF,mBAAmBlG,CAAnB,GAAuB4B,MAAMqG,OAAN,CAAc,CAAd,EAAiBE,KAA1C,IAAoD,GAApD,GAA0DjC,mBAAmBE,GAAlG;AACAC,SAAM5F,QAAN,CAAe0F,GAAf,GAAqB,CAAEvE,MAAMqG,OAAN,CAAc,CAAd,EAAiBG,KAAjB,GAAyBlC,mBAAmBlC,CAA9C,IAAoD,GAApD,GAA0DkC,mBAAmBC,GAAlG;AACA;AACD;AACD,UAASN,kBAAT,CAA6BjE,KAA7B,EAAqC;AACpCqE,uBAAqB,KAArB;AACA6B;AACA;;AAED,UAASJ,eAAT,GAA2B;AAC1Bb,gBAAcG,SAAd,GAA0B,IAA1B;;AAEA,MAAGH,cAAcW,OAAjB,EAA0B;AACzB9K,UAAO2L,YAAP,CAAoBxB,cAAcW,OAAlC;AACA;AACD;;AAED,UAASM,gBAAT,GAA4B;AAC3B,MAAGjB,cAAcC,OAAjB,EAA0B;AACzBD,iBAAcW,OAAd,GAAwB9K,OAAOE,UAAP,CAAkB,YAAW;AACpDiK,kBAAcW,OAAd,GAAwB,IAAxB;AACAX,kBAAcG,SAAd,GAA0B,KAA1B;AACA,IAHuB,EAGrBH,cAAcS,KAHO,CAAxB;AAIA;AACD;;AAED,MAAKzF,MAAL,GAAc,YAAW;;AAExB,MAAGoE,kBAAH,EAAuB;;AAEtBI,SAAM5F,QAAN,CAAe0F,GAAf,GAAqBvF,KAAKsG,GAAL,CAAU,CAAE,EAAZ,EAAgBtG,KAAKuG,GAAL,CAAU,EAAV,EAAcd,MAAM5F,QAAN,CAAe0F,GAA7B,CAAhB,CAArB;;AAEAE,SAAM5F,QAAN,CAAe6F,GAAf,GAAqB,YAAWgC,QAAX,CAAqB,KAAKjC,MAAM5F,QAAN,CAAe0F,GAAzC,CAArB;AACAE,SAAM5F,QAAN,CAAe8F,KAAf,GAAuB,YAAW+B,QAAX,CAAqBjC,MAAM5F,QAAN,CAAe2F,GAApC,CAAvB;;AAEA;AACAQ,YAAS;AACRN,SAAKD,MAAM5F,QAAN,CAAe6F,GAAf,GAAqBG,MAAMhG,QAAN,CAAe6F,GADjC;AAERC,WAAOF,MAAM5F,QAAN,CAAe8F,KAAf,GAAuBE,MAAMhG,QAAN,CAAe8F;AAFrC,IAAT;;AAKAF,SAAMG,IAAN,GAAaT,WAAb,CAbsB,CAaI;;AAE1BU,SAAMC,KAAN,GAAc,CAAd;AAEA,GAjBD,MAiBO;;AAGN,OAAIA,QAAQL,MAAMG,IAAN,GAAWH,MAAMG,IAAjB,GAAsBR,WAAlC;AACAK,SAAMG,IAAN;;AAEA;AACAI,UAAON,GAAP,GAAaM,OAAON,GAAP,GAAWG,MAAMC,KAAjB,GAAyBA,KAAtC;AACAE,UAAOL,KAAP,GAAeK,OAAOL,KAAP,GAAaE,MAAMC,KAAnB,GAA2BA,KAA1C;;AAEAD,SAAMC,KAAN,GAAcA,KAAd;;AAEA,OAAG,CAACG,cAAcG,SAAlB,EAA6B;AAC5BJ,WAAOL,KAAP,GAAeM,cAAcI,KAAd,GAAsB,CAAtB,GAA0BrG,KAAKuG,GAAL,CAASP,OAAOL,KAAhB,EAAuBM,cAAcI,KAArC,CAA1B,GAAwErG,KAAKsG,GAAL,CAASN,OAAOL,KAAhB,EAAuBM,cAAcI,KAArC,CAAvF;AACA;;AAED;AACAZ,SAAM5F,QAAN,CAAe6F,GAAf,IAAsBM,OAAON,GAA7B;AACAD,SAAM5F,QAAN,CAAe8F,KAAf,IAAwBK,OAAOL,KAA/B;;AAEA,OAAGF,MAAM5F,QAAN,CAAe6F,GAAf,GAAmB1F,KAAKC,EAA3B,EAA+B;AAC/B;AACA;AACCwF,UAAM5F,QAAN,CAAe6F,GAAf,GAAmB1F,KAAKC,EAAxB;AACA+F,WAAON,GAAP,GAAaM,OAAON,GAAP,GAAW,CAAC,CAAzB;AACA,IALD,MAKO,IAAGD,MAAM5F,QAAN,CAAe6F,GAAf,GAAmB,CAAtB,EAAyB;AAChC;AACA;AACCD,UAAM5F,QAAN,CAAe6F,GAAf,GAAmB,CAAnB;AACAM,WAAON,GAAP,GAAaM,OAAON,GAAP,GAAW,CAAC,CAAzB;AACA;AACD;;AAEDG,QAAMhG,QAAN,CAAe6F,GAAf,GAAqBD,MAAM5F,QAAN,CAAe6F,GAApC;AACAG,QAAMhG,QAAN,CAAe8F,KAAf,GAAuBF,MAAM5F,QAAN,CAAe8F,KAAtC;;AAEAI,UAAQ3G,CAAR,GAAY,MAAMY,KAAKyD,GAAL,CAAUgC,MAAM5F,QAAN,CAAe6F,GAAzB,CAAN,GAAuC1F,KAAKwD,GAAL,CAAUiC,MAAM5F,QAAN,CAAe8F,KAAzB,CAAnD;AACAI,UAAQ3C,CAAR,GAAY,MAAMpD,KAAKwD,GAAL,CAAUiC,MAAM5F,QAAN,CAAe6F,GAAzB,CAAlB;AACAK,UAAQrC,CAAR,GAAY,MAAM1D,KAAKyD,GAAL,CAAUgC,MAAM5F,QAAN,CAAe6F,GAAzB,CAAN,GAAuC1F,KAAKyD,GAAL,CAAUgC,MAAM5F,QAAN,CAAe8F,KAAzB,CAAnD;;AAEApH,SAAOoJ,MAAP,CAAe5B,OAAf;AACA,EA5DD;AA8DA,CAhND,C,CAgNG;;AAzPH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PArB,eAAevI,SAAf,GAA2BC,OAAOC,MAAP,CAAe,uBAAsBF,SAArC,CAA3B;;QAEQuI,c,GAAAA,c;;;;;;;;;;;;;;;;;;;;;;;mBC7PC5J,M;;;;;;;;;;;;;ACAT,+C","file":"sphereViewer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"), require(\"jquery-slim\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\", \"jquery-slim\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SphereViewer\"] = factory(require(\"three\"), require(\"jquery-slim\"));\n\telse\n\t\troot[\"SphereViewer\"] = factory(root[\"THREE\"], root[\"$\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5fa9595d567ec4ff0cf6","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}\n// module id = 0\n// module chunks = 0","/**\r\n * SphereViewer.js <https://github.com/knee-cola/SphereViewer.js>\r\n * Released under the MIT license\r\n * @author Nikola Derežić / https://github.com/knee-cola\r\n *\r\n * This class is an implementation of photosphere viewer.\r\n * It supports spherical images as created by the following cameras/software:\r\n *  - Ricoh Theta\r\n *  - Google PhotoSphere\r\n * \r\n * How to use:\r\n * \r\n *    // defining spinner config\r\n *    var config = {\r\n *      // (if set) the logo will be displayed at the bottom\r\n *      // of the sphere, which is usefull for hiding the triopod\r\n *      logo:'img/logo.png',\r\n *      // (if set) the usage hint is displayed in the center of the screen\r\n *      // and is hidden after the user clicks/taps the screen\r\n *      hint: isMobile ? 'img/sphere-icon-mobile.png' : 'img/sphere-icon-desktop.png',\r\n *      \r\n *      // overriding the default control config\r\n *      control: {\r\n *        autoRotate: true\r\n *      },\r\n *      \r\n *      // overidding the default spinner config\r\n *      spinner: {\r\n *        groupRadius: 20\r\n *      },\r\n *      \r\n *      // overriding the default THREE.js UV mapping\r\n *      uvMapper: (geometry) => { ... doing some custom UV mapping  }\r\n *    };\r\n *    \r\n *    var picUrls = ['img/sphere/preloader.jpg', 'img/sphere/hd.jpg']\r\n *    \r\n *    // creating a new instance of the viewer\r\n *    // ... the viewer will automaticall be appended to <body> and displayed\r\n *    var viewer = new SphereViewer.Viewer(picUrls, controlConfig);\r\n *    \r\n *    // adding event handlers:\r\n *    viewer.addEventListener('close', function() { console.log('sphere closed'); });\r\n * \r\n */\r\nimport {\r\n    EventDispatcher as THREE_EventDispatcher,\r\n    WebGLRenderer as THREE_WebGLRenderer,\r\n    Scene as THREE_Scene,\r\n    PerspectiveCamera as THREE_PerspectiveCamera,\r\n    SphereGeometry as THREE_SphereGeometry,\r\n    Mesh as THREE_Mesh,\r\n    MeshBasicMaterial as THREE_MeshBasicMaterial,\r\n    TextureLoader as THREE_TextureLoader,\r\n    PlaneGeometry as THREE_PlaneGeometry,\r\n    FrontSide as THREE_FrontSide,\r\n    BackSide as THREE_BackSide\r\n  } from 'three'\r\nimport $ from 'jquery-slim'\r\n\r\nimport {SphereControls} from './sphereControls'\r\nimport {ProgressiveImgLoader} from './progressiveImgLoader'\r\nimport {BallSpinnerLoader} from './ballSpinnerLoader'\r\n\r\nexport function Viewer(imageUrls, config) {\r\n\r\n  this.isDisposed = false;\r\n  this.config = config = config || {};\r\n\r\n  config.showCloseButton = !!config.showCloseButton;\r\n\r\n  this.initViewport();\r\n  this.initScene();\r\n  this.initSphere(imageUrls);\r\n\r\n  if(this.config.logo) {\r\n    this.initLogo(this.config.logo, this.config.logoDistance===void 0 ? -15 : this.config.logoDistance);\r\n  }\r\n\r\n  if(this.config.hint) {\r\n    this.showHint(this.config.hint);\r\n  }\r\n\r\n  this.initControls();\r\n\r\n  // attaching a bound version of the method to the instance\r\n  // > we'll need it to remove event listener\r\n  this.onResize = this.onResize.bind(this);\r\n\r\n  window.addEventListener('resize', this.onResize, false);\r\n  window.setTimeout(this.onResize, 1);\r\n\r\n  this.render();\r\n};\r\n\r\nvar proto = Viewer.prototype = Object.create( THREE_EventDispatcher.prototype );\r\n\r\nproto.initViewport = function() {\r\n\r\n    var nativeW = window.devicePixelRatio * window.screen.availWidth,\r\n        scale = 1/window.devicePixelRatio,\r\n        viewportMeta = $('head meta[name=\"viewport\"]');\r\n\r\n    this.originalViewPortMeta = viewportMeta.attr('content');\r\n    viewportMeta.attr('content', 'initial-scale='+scale+', maximum-scale='+scale+', user-scalable=0');\r\n\r\n    // na mobitelima pixel ration NIJE 1\r\n    var isMobile = window.devicePixelRatio!==1;\r\n\r\n    this.container = document.createElement('div');\r\n    this.container.className = 'sphere-container ' + (isMobile ? 'isMobile' : 'isDesktop');\r\n\r\n    if(this.config.showCloseButton) {\r\n      this.closeButton = document.createElement('i');\r\n      this.closeButton.className = 'cmdCloseSphere material-icons';\r\n      this.closeButton.innerHTML = 'highlight_off';\r\n      this.container.appendChild(this.closeButton);\r\n      // attaching a bound version of the method to the instance\r\n      // > we'll need it to remove event listener\r\n      this.closeButton_onClick = this.closeButton_onClick.bind(this);\r\n      this.closeButton.addEventListener('click', this.closeButton_onClick);\r\n    }\r\n\r\n    document.getElementsByTagName('body')[0].appendChild(this.container);\r\n\r\n  }; // proto.initViewport = function() {...}\r\n\r\nproto.closeButton_onClick = function() {\r\n  this.dispose();\r\n};\r\nproto.controls_onTap = function(ev) {\r\n  // on first tap - hide the hint\r\n  this.hideHint();\r\n};\r\n\r\nproto.initScene = function() {\r\n\r\n  var body = document.getElementsByTagName('body')[0];\r\n\r\n  this.renderer = new THREE_WebGLRenderer();\r\n\r\n  this.renderer.setSize(body.scrollWidth, body.scrollHeight);\r\n  this.container.appendChild(this.renderer.domElement);\r\n\r\n  this.scene = new THREE_Scene();\r\n\r\n  let fieldOfView = 90,\r\n      aspectRatio = 1,\r\n      near = 1,\r\n\r\n      far = 1000;\r\n\r\n  this.camera = new THREE_PerspectiveCamera(fieldOfView, aspectRatio, near, far);\r\n  this.scene.add(this.camera);\r\n}; // proto.initScene = function() {...}\r\n\r\nproto.initSphere = function(imageUrls) {\r\n\r\n  var speherRadius = 100,\r\n      sphere_H_segments = 64,\r\n      sphere_V_segments = 64;\r\n\r\n  this.imgLoader = new ProgressiveImgLoader();\r\n\r\n  this.loader_onDone = this.loader_onDone.bind(this);\r\n\r\n  this.imgLoader.addEventListener('done', this.loader_onDone);\r\n\r\n  var geometry = new THREE_SphereGeometry(speherRadius, sphere_H_segments, sphere_V_segments);\r\n\r\n  // check if a special UV mapping function should be used\r\n  if(this.config.uvMapper) {\r\n    this.config.uvMapper(geometry);\r\n  }\r\n\r\n  this.sphere = new THREE_Mesh(\r\n      geometry,\r\n      new THREE_MeshBasicMaterial({\r\n        map: this.imgLoader.load(imageUrls),\r\n        side: THREE_FrontSide // displaying the texture on the outer side of the sphere\r\n      })\r\n  );\r\n\r\n  this.sphere.scale.x = -1; // flipping sphere inside-out - not the texture is rendered on the inner side\r\n  this.scene.add(this.sphere);\r\n\r\n  this.showLoader();\r\n\r\n}; // proto.initSphere = function(imageUrls) {...}\r\n\r\nproto.initLogo = function(logoUrl, logoDistance) {\r\n\r\n  var texLoader = new THREE_TextureLoader(),\r\n    self = this;\r\n\r\n  texLoader.crossOrigin = '';\r\n\r\n  texLoader.load(logoUrl, function(texture) {\r\n    self.logo = new THREE_Mesh(\r\n        new THREE_PlaneGeometry(10,10),\r\n        new THREE_MeshBasicMaterial({\r\n          map: texture,\r\n          side: THREE_FrontSide,\r\n          transparent: true,\r\n          opacity: 1\r\n        })\r\n    );\r\n\r\n    self.logo.position.set(0,logoDistance,0);\r\n    self.logo.rotation.x = -Math.PI/2;\r\n\r\n    self.scene.add(self.logo);\r\n  });\r\n\r\n}; // proto.initLogo = function(imageUrls) {...}\r\n\r\n\r\n/*---------------------------------------------------------------------*//**\r\n * Method displays an icon with instructions on how to use the viewer\r\n *\r\n * @param      {string}  hintUrl  URL of the image containing instructions\r\n */\r\nproto.showHint = function(hintUrl) {\r\n\r\n  var texLoader = new THREE_TextureLoader(),\r\n    self = this;\r\n\r\n  texLoader.crossOrigin = '';\r\n\r\n  texLoader.load(hintUrl, function(texture) {\r\n    self.hint = new THREE_Mesh(\r\n          new THREE_PlaneGeometry(10,10),\r\n          new THREE_MeshBasicMaterial({\r\n            map: texture,\r\n            side: THREE_FrontSide,\r\n            transparent: true,\r\n            opacity: 1\r\n          })\r\n      );\r\n\r\n    self.hint.position.set(0,0,-30);\r\n    // self.hint.rotation.x = -Math.PI/4;\r\n\r\n    self.camera.add(self.hint);\r\n  });\r\n}; // proto.showHint = function(imageUrls) {...}\r\n\r\n/*---------------------------------------------------------------------*//**\r\n * Method hides the hint\r\n */\r\nproto.hideHint = function() {\r\n  if(this.hint) {\r\n    this.camera.remove(this.hint);\r\n    this.hint = null;\r\n  }\r\n}\r\n\r\nproto.initControls = function() {\r\n  this.controls = new SphereControls(this.camera, this.renderer.domElement, this.config.control);\r\n  this.controls_onTap = this.controls_onTap.bind(this);\r\n  this.controls.addEventListener('tap', this.controls_onTap);\r\n}; // proto.initControls = function() {...}\r\n\r\nproto.onResize = function(ev) {\r\n  var width = this.container.offsetWidth;\r\n  var height = this.container.offsetHeight;\r\n\r\n  if(this.camera) {\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n  }\r\n\r\n  this.renderer.setSize(width, height);\r\n}; // proto.onResize = function(ev) {...}\r\n\r\nproto.render = function() {\r\n\r\n  if(this.isDisposed) {\r\n    return;\r\n  }\r\n\r\n  requestAnimationFrame(this.render.bind(this));\r\n\r\n  this.dispatchEvent({type:'preRender', original:event });\r\n\r\n  if(this.controls) {\r\n    this.controls.update();\r\n  }\r\n\r\n  if(this.spinLoader) {\r\n    this.spinLoader.animate();\r\n  }\r\n\r\n  this.renderer.render(this.scene, this.camera);\r\n}; // proto.render = function() {...}\r\n\r\nproto.showLoader = function() {\r\n  this.spinLoader = new BallSpinnerLoader(this.config.spinner);\r\n  this.camera.add(this.spinLoader.mesh);\r\n  this.spinLoader.mesh.position.set(0,0,-50);\r\n  \r\n}; // proto.showLoader = function() {...}\r\n\r\nproto.hideLoader = function() {\r\n  if(this.spinLoader) {\r\n    this.camera.remove(this.spinLoader.mesh);\r\n    this.spinLoader = null;\r\n  }\r\n}; // proto.hideLoader = function() { ... }\r\n\r\nproto.loader_onDone = function() {\r\n  this.loader_onDone = null; // loader mi više nije potreban\r\n  this.hideLoader();\r\n};\r\n\r\nproto.dispose = function() {\r\n\r\n  window.removeEventListener('resize', this.onResize);\r\n\r\n  if(this.closeButton) {\r\n    this.closeButton.removeEventListener('click', this.closeButton_onClick);\r\n  }\r\n\r\n  this.controls.removeEventListener('tap', this.controls_onTap);\r\n\r\n  this.imgLoader.dispose();\r\n\r\n  this.isDisposed = true;\r\n  this.container.remove();\r\n\r\n  // restoring original viewport meta\r\n  $('head meta[name=\"viewport\"]').attr('content', this.originalViewPortMeta);\r\n\r\n  this.loaderEl = this.imgLoader = this.closeButton = this.container = this.renderer = this.container = this.camera = this.scene = this.sphere = this.controls = null;\r\n\r\n}; // proto.dispose = function() {...}\n\n\n// WEBPACK FOOTER //\n// ./src/viewer.js","/**\r\n * BallSpinnerLoader.js <https://github.com/knee-cola/BallSpinnerLoader.js>\r\n * Released under the MIT license\r\n * @author Nikola Derežić / https://github.com/knee-cola\r\n *\r\n * This is a spinner/loader built for Three.js platform.\r\n * \r\n * It can be used to notify user that some resources are being loaded.\r\n * I made it to replace pure CSS spinner, which was displayed in the\r\n * overlay above the 3D animation, since it was slowing down WebGL\r\n *\r\n * How to use:\r\n * \r\n *    // defining spinner config\r\n *    var spinnerConfig = {\r\n *      groupRadius: 20, // outter radius of the spinner circle\r\n *      circleCount: 8, // number of spinner elements (circles)\r\n *      circleRadius: 5, // radius of each of the spinner elements (circles)\r\n *      // as they spin, circles are brought closer to the camera af their\r\n *      // opacity increases. Here we can define how close/far are\r\n *      // the elements pushed\r\n *      animationAmplitude: 10\r\n *    };\r\n *    \r\n *\r\n *    // creating a new spinner\r\n *    var spinLoader = new BallSpinLoader(spinnerConfig);\r\n *    \r\n *    // add spinner to the scene\r\n *    spinLoader.addToScene(scene);\r\n *\r\n *   // add it to the render funcion\r\n *   function render() {\r\n *\r\n *      requestAnimationFrame( render );\r\n *\r\n *     // make it spin\r\n *     spinLoader.animate();\r\n *\r\n *     renderer.render( scene, camera );\r\n *   }\r\n * \r\n */\r\nimport {\r\n    EventDispatcher as THREE_EventDispatcher,\r\n    CircleGeometry as THREE_CircleGeometry,\r\n    MeshBasicMaterial as THREE_MeshBasicMaterial,\r\n    DoubleSide as THREE_DoubleSide,\r\n    Object3D as THREE_Object3D,\r\n    Mesh as THREE_Mesh\r\n  } from 'three'\r\n\r\nvar BallSpinnerLoader = function(config) {\r\n  config = config  || {};\r\n\r\n  this.groupRadius = config.groupRadius || 10;\r\n  this.circleCount = config.circleCount || 8;\r\n  this.circleRadius = config.circleRadius || 1;\r\n  this.groupAngle = 0;\r\n\r\n  // circles depending on their opacity will\r\n  // have higer or lower opacity\r\n  // [amplitude] defines the amplitude\r\n  this.animationAmplitude = config.animationAmplitude || 10;\r\n  \r\n  this.circles = [];\r\n  this.mesh = this.initGroup();\r\n};\r\n\r\nBallSpinnerLoader.prototype = {\r\n  makeCircle: function(config) {\r\n    config = config || {};\r\n    var circleRadius = config.radius || 5,\r\n        circleSegments = config.segments || 16, //<-- Increase or decrease for more resolution I guess\r\n        circleGeometry = new THREE_CircleGeometry( circleRadius, circleSegments ),\r\n        circleMaterial = new THREE_MeshBasicMaterial({ color: 0xffffff, transparent:true, opacity: config.opacity, side: THREE_DoubleSide });\r\n\r\n    return({\r\n      mesh: new THREE_Mesh(circleGeometry, circleMaterial),\r\n      opacityStep: config.opacityStep || 0.01\r\n    });\r\n  },\r\n  addToScene:function(scene) {\r\n    scene.add(this.mesh);\r\n  },\r\n  initGroup: function() {\r\n    var mesh = new THREE_Object3D(),\r\n        // the opacity will be distributed symetrically\r\n        // with maximum on one side of the circle group\r\n        // and minimum at the opposite side\r\n        currOpacity = 0,\r\n        opacityStep = 1 / (this.circleCount/2+1),\r\n        // opacity will be animated - here we define how fast\r\n        animationStep = 0.02,\r\n        // circles are distributed evenly around the group edge\r\n        currAngle = 0,\r\n        angleStep = 2*Math.PI / this.circleCount;\r\n\r\n    for(var i=0;i<this.circleCount;i++) {\r\n      \r\n      currOpacity+=opacityStep;\r\n      \r\n      if(currOpacity>1) {\r\n      // IF the max opacity has been reached\r\n      // > go into oposit direction\r\n        currOpacity = 1-opacityStep;\r\n        opacityStep = -opacityStep;\r\n        // reverse the opacity animation direction,\r\n        // so that the second halve of the circles\r\n        // is on the fade-out direction\r\n        // ... the net result that the opacity minimum/maximum\r\n        // will rotate around the group\r\n        animationStep = -animationStep;\r\n      }\r\n      \r\n      var oneCircle = this.makeCircle({opacity:currOpacity, opacityStep: animationStep, radius: this.circleRadius});\r\n      \r\n      // oneCircle.rotation.x = Math.PI / 4; // rotiram krug tako da bude položen na ravninu\r\n      var pos = this.polar2cartesian({ distance: this.groupRadius, radians: currAngle});\r\n      oneCircle.mesh.position.set(pos.x, pos.y, currOpacity*this.animationAmplitude);\r\n      \r\n      currAngle+=angleStep;\r\n      \r\n      mesh.add(oneCircle.mesh);\r\n      this.circles.push(oneCircle);\r\n    }\r\n\r\n    return(mesh);\r\n  },\r\n  polar2cartesian: function(polar) {\r\n    return({\r\n      x: Math.round(polar.distance * Math.cos(polar.radians)*1000)/1000,\r\n      y: Math.round(polar.distance * Math.sin(polar.radians)*1000)/1000\r\n    });\r\n  },\r\n  animate: function() {\r\n    this.mesh.rotation.z+=0.02;\r\n    var circles = this.circles;\r\n    var zStep = 50 / (this.circleCount/2+1);\r\n\r\n    for(var i=0; i<circles.length; i++) {\r\n      var oneCircle = circles[i],\r\n          newOpacity = oneCircle.mesh.material.opacity + oneCircle.opacityStep,\r\n          newRadius = oneCircle.mesh.geometry.radius;\r\n\r\n      if(newOpacity>1) {\r\n        newOpacity = 1-oneCircle.opacityStep;\r\n        oneCircle.opacityStep=-oneCircle.opacityStep;\r\n      } else if(newOpacity<0) {\r\n        newOpacity = oneCircle.opacityStep;\r\n        oneCircle.opacityStep=-oneCircle.opacityStep;\r\n      }\r\n      \r\n      oneCircle.mesh.material.opacity = newOpacity;\r\n      oneCircle.mesh.position.z = newOpacity*this.animationAmplitude;\r\n    }\r\n  }\r\n};\r\n\r\nexport { BallSpinnerLoader }\n\n\n// WEBPACK FOOTER //\n// ./src/ballSpinnerLoader.js","/**\r\n * ProgressiveImgLoader.js <https://github.com/knee-cola/ProgressiveImgLoader.js>\r\n * Released under the MIT license\r\n * @author Nikola Derežić / https://github.com/knee-cola\r\n * \r\n * This is a simple progressive image loader for Three.js\r\n * \r\n * It enables the smaller image (short loading time) files to be pre-loaded first,\r\n * before the big texture image is fully loaded.\r\n * \r\n * The images are loaded in the order they are passed to the loader\r\n * \r\n * The loader dispatches the following events:\r\n *  - progress = dispatched evey time an additional image was loaded\r\n *  - done = dispatched after the last image was loaded\r\n *  \r\n * Here's a simple example:\r\n * \r\n *  // Defining an array of different sizes of images\r\n *  //\r\n *  // Hint: apart from degrading image resolution, smaller image files\r\n *  //       can also be produced by increasing the JPG compression\r\n *  var imageUrls = ['480p.jpg', '720p.jpg', '1080p.jpg', '2048p.jpg']:\r\n *  \r\n *  // creating a new loader\r\n *  var loader = new ProgressiveImageLoader(imageUrls);\r\n *  \r\n *  // registering event handlers\r\n *  loader.addEventListener('progress', function() { console.log('progress');  });\r\n *  loader.addEventListener('done', function() { console.log('done');  });\r\n *  \r\n *  // creating material - calling the [load] function\r\n *  var material = new THREE.MeshBasicMaterial({ map: loader.load() })\r\n *\r\n *  var mesh = new THREE.Mesh(geometry, material);\r\n *  \r\n *  scene.add(mesh);\r\n * \r\n */\r\n\r\nimport {\r\n    EventDispatcher as THREE_EventDispatcher,\r\n    Texture as THREE_Texture\r\n  } from 'three'\r\n\r\nvar ProgressiveImgLoader = function() { };\r\n\r\nvar proto = ProgressiveImgLoader.prototype = Object.create( THREE_EventDispatcher.prototype );\r\n\r\nproto.load = function(images) {\r\n\r\n  var self = this;\r\n\r\n  var texture = new THREE_Texture();\r\n\r\n  // create an image object\r\n  var imageObj = self.imageObj = new Image(),\r\n      loadingIx = 0;\r\n\r\n  // this needs to be sit in order not to get \"Tainted canvases may not be loaded.\" WebGL error\r\n  imageObj.crossOrigin = \"anonymous\";\r\n\r\n  imageObj.onload = function() {\r\n\r\n    // [imageObj] is set to NULL when the object is disposed\r\n    if(self.imageObj) {\r\n\r\n      texture.needsUpdate = true;\r\n\r\n      if(loadingIx < images.length) {\r\n        self.dispatchEvent({type: 'progress', imageIndex: loadingIx});\r\n\r\n        // don't change the image [src] until the texture had a chance to update itself\r\n        window.setTimeout(function() {\r\n          imageObj.src = images[loadingIx++];\r\n        }, 1000);\r\n\r\n      } else {\r\n        self.dispatchEvent({type: 'done'});\r\n        self.imageObj = null;\r\n      }\r\n        \r\n    }\r\n\r\n  }; // imageObj.onload = function() {...}\r\n\r\n  // the loading process will begin after we set the [src] property\r\n  imageObj.src = images[loadingIx++];\r\n  texture.image = imageObj;\r\n\r\n  return(texture);\r\n\r\n}; // proto.load = function(images) {...}\r\n\r\nproto.dispose = function() {\r\n  // stop loading current image\r\n  if(this.imageObj) {\r\n    this.imageObj.src = '';\r\n  }\r\n  this.imageObj = null;\r\n};\r\n\r\nexport {ProgressiveImgLoader}\n\n\n// WEBPACK FOOTER //\n// ./src/progressiveImgLoader.js","/**\r\n * SphereControls.js <https://github.com/knee-cola/SphereControls.js>\r\n * Released under the MIT license\r\n * @author Nikola Derežić / https://github.com/knee-cola\r\n * \r\n * This class controls the camera positioned in the middle of a sphere. It\r\n * allows the user to look around. It supports desktop (click events) and mobile\r\n * browser (touch events).\r\n * \r\n * How to use:\r\n * \r\n *  // defining te config for the controls\r\n * \tvar controlConfig = {\r\n * \t\tautoRotate: true, // the camera should rotate automatially\r\n * \t\tautoRotateSpeed: 2, // the speed of automatic rotation\r\n * \t\tautoRotateDirection: -1, // the direction (1=left / -1=right)\r\n * \t\tautoRotateDelay: 5000 // for how long should automatic rotation be paused after a user interaction\r\n * \t};\r\n * \r\n * \tvar _ctrl = new SphereControls(_camera, _renderer.domElement, controlConfig);\r\n * \t\r\n * \t// attaching the event handler\r\n * \t_ctrl.addEventListener('tap', function() { console.log('user tapped the screen'); });\r\n * \r\n *   function render() {\r\n *\r\n *      requestAnimationFrame( render );\r\n *\r\n *     // updating controls from the [render] function\r\n *     _ctrl.update();\r\n *\r\n *     _renderer.render( _scene, _camera );\r\n *   }\r\n *   \r\n */\r\nimport {\r\n    EventDispatcher as THREE_EventDispatcher,\r\n    Vector3 as THREE_Vector3,\r\n    Math as THREE_Math\r\n  } from 'three'\r\n\r\nvar SphereControls = function (camera, domElement, config) {\r\n\r\n\tvar self = this;\r\n\r\n\tconfig = config || {};\r\n\r\n\tdomElement = ( domElement !== undefined ) ? domElement : document;\r\n\tdomElement.addEventListener( 'mousedown', onDocumentMouseDown, false );\r\n\tdomElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\r\n\tdomElement.addEventListener( 'mouseup', onDocumentMouseUp, false );\r\n\tdomElement.addEventListener( 'wheel', onDocumentMouseWheel, false );\r\n\tdomElement.addEventListener( 'touchstart', onDocumentTouchStart, false );\r\n\tdomElement.addEventListener( 'touchend', onDocumentTouchEnd, false );\r\n\tdomElement.addEventListener( 'touchmove', onDocumentTouchMove, false );\r\n\r\n\t//  [initialTime] determins the how much the speed is initially decreased,\r\n\t//  after the user releases the mouse button - the higher the value,\r\n\t//  the larger initial drop in speed - don't go below 2\r\n\tvar initialTime = 5,\r\n\t\t// [lubrication] determins how fast the speed decreases after the user\r\n\t\t// releases the mouse button. Larger value, the slower the speed drops\r\n\t\tlubrication = 60;\r\n\r\n\tvar _isUserInteracting = false,\r\n\t\t_dragStartPosition ={\r\n\t\t\tx: null,\r\n\t\t\ty: null,\r\n\t\t\tlat: null,\r\n\t\t\tlon: null\r\n\t\t},\r\n\t\t_curr = {\r\n\t\t\tposition: {\r\n\t\t\t\tlon: 90,\r\n\t\t\t\tlat: 0,\r\n\t\t\t\tphi: Math.PI/2,\r\n\t\t\t\ttheta: 0\r\n\t\t\t},\r\n\t\t\ttime: initialTime\r\n\t\t},\r\n\t\t_prev = {\r\n\t\t\tposition: {\r\n\t\t\t\tphi: _curr.position.phi,\r\n\t\t\t\ttheta: _curr.position.theta\r\n\t\t\t},\r\n\t\t\ttime2: 1\r\n\t\t},\r\n\t\t_target = new THREE_Vector3(),\r\n\t\t_speed = {\r\n\t\t\tphi: 0,\r\n\t\t\ttheta: 0\r\n\t\t},\r\n\t\t_autoRotation = {\r\n\t\t\tenabled: !!config.autoRotate,\r\n\t\t\tsuspended: !config.autoRotate,\r\n\t\t\tspeed: Math.max(0, Math.min(10, config.autoRotateSpeed || 1)) / 1000 * (config.autoRotateDirection===-1 ? -1 : 1),\r\n\t\t\tdelay: Math.max(config.autoRotateDelay || 5000, 1000), // after how much time shoud the automatic rotation start\r\n\t\t\ttimeout: null\r\n\r\n\t\t}\r\n\r\n\tfunction onDocumentMouseDown( event ) {\r\n\t\t\r\n\t\t// attache the original event as payload\r\n\t\tself.dispatchEvent({type:'tap', original:event });\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\t_isUserInteracting = true;\r\n\t\tautoRotate_Stop();\r\n\r\n\t\t_curr.position.lon = THREE_Math.radToDeg( _curr.position.theta );\r\n\t\t_curr.position.lat = 90 - THREE_Math.radToDeg( _curr.position.phi );\r\n\r\n\t\t_dragStartPosition.x = event.clientX;\r\n\t\t_dragStartPosition.y = event.clientY;\r\n\t\t_dragStartPosition.lon = _curr.position.lon;\r\n\t\t_dragStartPosition.lat = _curr.position.lat;\r\n\t}\r\n\tfunction onDocumentMouseMove( event ) {\r\n\t\tif ( _isUserInteracting === true ) {\r\n\t\t\t_curr.position.lon = ( _dragStartPosition.x - event.clientX ) * 0.1 + _dragStartPosition.lon;\r\n\t\t\t_curr.position.lat = ( event.clientY - _dragStartPosition.y ) * 0.1 + _dragStartPosition.lat;\r\n\t\t}\r\n\t\tself.dispatchEvent({type:'mouseMove', original:event });\r\n\t}\r\n\tfunction onDocumentMouseUp( event ) {\r\n\t\t_isUserInteracting = false;\r\n\t\tevent.preventDefault()\r\n\t\tautoRotate_Start();\r\n\t}\r\n\tfunction onDocumentMouseWheel( event ) {\r\n\t\tcamera.fov += event.deltaY * 0.05;\r\n\t\tcamera.updateProjectionMatrix();\r\n\t}\r\n\tfunction onDocumentTouchStart( event ) {\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\t_isUserInteracting = true;\r\n\t\t\tautoRotate_Stop();\r\n\r\n\t\t\t// attache the original event as payload\r\n\t\t\tself.dispatchEvent({type:'tap', original:event });\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t_dragStartPosition.x = event.touches[ 0 ].pageX;\r\n\t\t\t_dragStartPosition.y = event.touches[ 0 ].pageY;\r\n\r\n\t\t\t_curr.position.lon = THREE_Math.radToDeg( _curr.position.theta );\r\n\t\t\t_curr.position.lat = 90 - THREE_Math.radToDeg( _curr.position.phi );\r\n\r\n\t\t\t_dragStartPosition.lon = _curr.position.lon;\r\n\t\t\t_dragStartPosition.lat = _curr.position.lat;\r\n\t\t}\r\n\t}\r\n\tfunction onDocumentTouchMove( event ) {\r\n\t\tif ( event.touches.length == 1 ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t_curr.position.lon = ( _dragStartPosition.x - event.touches[0].pageX ) * 0.1 + _dragStartPosition.lon;\r\n\t\t\t_curr.position.lat = ( event.touches[0].pageY - _dragStartPosition.y ) * 0.1 + _dragStartPosition.lat;\r\n\t\t}\r\n\t}\r\n\tfunction onDocumentTouchEnd( event ) {\r\n\t\t_isUserInteracting = false;\r\n\t\tautoRotate_Start();\r\n\t}\r\n\r\n\tfunction autoRotate_Stop() {\r\n\t\t_autoRotation.suspended = true;\r\n\r\n\t\tif(_autoRotation.timeout) {\r\n\t\t\twindow.clearTimeout(_autoRotation.timeout);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoRotate_Start() {\r\n\t\tif(_autoRotation.enabled) {\r\n\t\t\t_autoRotation.timeout = window.setTimeout(function() {\r\n\t\t\t\t_autoRotation.timeout = null;\r\n\t\t\t\t_autoRotation.suspended = false;\r\n\t\t\t}, _autoRotation.delay);\r\n\t\t}\r\n\t}\r\n\r\n\tthis.update = function() {\r\n\r\n\t\tif(_isUserInteracting) {\r\n\r\n\t\t\t_curr.position.lat = Math.max( - 85, Math.min( 85, _curr.position.lat ) );\r\n\r\n\t\t\t_curr.position.phi = THREE_Math.degToRad( 90 - _curr.position.lat );\r\n\t\t\t_curr.position.theta = THREE_Math.degToRad( _curr.position.lon );\r\n\r\n\t\t\t// calculate the drag speed\r\n\t\t\t_speed = {\r\n\t\t\t\tphi: _curr.position.phi - _prev.position.phi,\r\n\t\t\t\ttheta: _curr.position.theta - _prev.position.theta\r\n\t\t\t};\r\n\r\n\t\t\t_curr.time = initialTime; // reset the time to initial time\r\n\r\n\t\t\t_prev.time2 = 1;\r\n\r\n\t\t} else {\r\n\r\n\r\n\t\t\tvar time2 = _curr.time*_curr.time/lubrication;\r\n\t\t\t_curr.time++;\r\n\r\n\t\t\t// calculating the new value of speed\r\n\t\t\t_speed.phi = _speed.phi*_prev.time2 / time2;\r\n\t\t\t_speed.theta = _speed.theta*_prev.time2 / time2;\r\n\r\n\t\t\t_prev.time2 = time2;\r\n\r\n\t\t\tif(!_autoRotation.suspended) {\r\n\t\t\t\t_speed.theta = _autoRotation.speed < 0 ? Math.min(_speed.theta, _autoRotation.speed) : Math.max(_speed.theta, _autoRotation.speed);\r\n\t\t\t}\r\n\r\n\t\t\t// adjusting the camera angle\r\n\t\t\t_curr.position.phi += _speed.phi;\r\n\t\t\t_curr.position.theta += _speed.theta;\r\n\r\n\t\t\tif(_curr.position.phi>Math.PI) {\r\n\t\t\t// IF the camera hits the sphere bottom\r\n\t\t\t// > make it bouce back\r\n\t\t\t\t_curr.position.phi=Math.PI;\r\n\t\t\t\t_speed.phi = _speed.phi*-1;\r\n\t\t\t} else if(_curr.position.phi<0) {\r\n\t\t\t// IF the camera hits the sphere top\r\n\t\t\t// > make it bouce back\r\n\t\t\t\t_curr.position.phi=0;\r\n\t\t\t\t_speed.phi = _speed.phi*-1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_prev.position.phi = _curr.position.phi;\r\n\t\t_prev.position.theta = _curr.position.theta;\r\n\r\n\t\t_target.x = 500 * Math.sin( _curr.position.phi ) * Math.cos( _curr.position.theta );\r\n\t\t_target.y = 500 * Math.cos( _curr.position.phi );\r\n\t\t_target.z = 500 * Math.sin( _curr.position.phi ) * Math.sin( _curr.position.theta );\r\n\r\n\t\tcamera.lookAt( _target );\r\n\t}\r\n\r\n}; // SphereControls = function (camera) {...}\r\n\r\nSphereControls.prototype = Object.create( THREE_EventDispatcher.prototype );\r\n\r\nexport {SphereControls}\n\n\n// WEBPACK FOOTER //\n// ./src/sphereControls.js","export { Viewer } from './viewer.js';\n\n\n// WEBPACK FOOTER //\n// ./src/sphereViewer.js","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jquery-slim\",\"commonjs2\":\"jquery-slim\",\"amd\":\"jquery-slim\",\"root\":\"$\"}\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}